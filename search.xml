<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Promiseçš„ä½¿ç”¨]]></title>
    <url>%2F2019%2F05%2F31%2FPromise%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[æ¸©æ•…è€ŒçŸ¥æ–°ï¼Œå¯ä»¥ä¸ºå¸ˆçŸ£ ES6 Promise ç”¨æ³•è®²è§£Promiseæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè‡ªå·±èº«ä¸Šæœ‰allã€rejectã€resolveè¿™å‡ ä¸ªçœ¼ç†Ÿçš„æ–¹æ³•ï¼ŒåŸå‹ä¸Šæœ‰thenã€catchç­‰åŒæ ·å¾ˆçœ¼ç†Ÿçš„æ–¹æ³•ã€‚ resolveå‚æ•°ï¼ˆå¯ä»¥ç†è§£åˆæ ¼çš„å†…å®¹ï¼‰12345678910111213&lt;script&gt; var p = new Promise(function(resolve,reject)&#123; setTimeout(() =&gt; &#123; console.log('æ‰§è¡Œå®Œæˆ'); resolve("åˆæ ¼çš„å†…å®¹") &#125;,2000) &#125;)&lt;/script&gt;å…ˆæ‰“å°å‡ºäº†Promise &#123;&lt;pending&gt;&#125; __proto__: Promise [[PromiseStatus]]: "resolved" [[PromiseValue]]: "åˆæ ¼çš„å†…å®¹"å†è¿‡2ç§’ï¼Œæ‰“å°å‡ºäº†'æ‰§è¡Œå®Œæˆ' ä½¿ç”¨.thenå°±å¯ä»¥è·å–resovleä¸­çš„å†…å®¹å•¦123456789101112&lt;script&gt; var p = new Promise(function(resolve,reject)&#123; setTimeout(() =&gt; &#123; console.log('æ‰§è¡Œå®Œæˆ'); resolve("åˆæ ¼çš„å†…å®¹") &#125;,2000) &#125;) p.then( (val) =&gt; &#123; console.log(val) &#125;)&lt;/script&gt;2ç§’é’Ÿåå°±ç›¸ç»§è¾“å‡ºäº† "æ‰§è¡Œå®Œæˆ" "åˆæ ¼çš„å†…å®¹" resolveå‚æ•°ï¼ˆå¯ä»¥ç†è§£ä¸åˆæ ¼çš„å†…å®¹ï¼‰å¯ä»¥ä½¿ç”¨.catchè·å–å®ƒçš„å†…å®¹123456789101112131415161718192021function getNumber()&#123; var p = new Promise(function(resolve, reject)&#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function()&#123; var num = Math.ceil(Math.random()*10); //ç”Ÿæˆ1-10çš„éšæœºæ•° if(num&lt;=5)&#123; resolve(num); &#125; else&#123; reject('æ•°å­—å¤ªå¤§äº†'); &#125; &#125;, 2000); &#125;); return p; &#125;getNumber().then( val =&gt; &#123; console.log(val)&#125;).catch( val =&gt; &#123; console.log(val)&#125;)å¦‚ä½•æ»¡è¶³ifæ¡ä»¶ï¼Œå°±è¾“å‡ºç›¸åº”æ•°å­—ï¼Œå¦åˆ™è¾“å‡º rejectä¸­çš„'æ•°å­—å¤ªå¤§äº†' allçš„ç”¨æ³• æ–¹æ³•éƒ½è°ƒç”¨å®Œæˆå†è¾“å‡ºresolveä¸­çš„å†…å®¹ 12345678910111213141516171819202122232425262728293031323334353637function runAsync1()&#123;var p = new Promise(function(resolve, reject)&#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function()&#123; console.log('å¼‚æ­¥ä»»åŠ¡1æ‰§è¡Œå®Œæˆ'); resolve('éšä¾¿ä»€ä¹ˆæ•°æ®1'); &#125;, 1000);&#125;);return p; &#125;function runAsync2()&#123; var p = new Promise(function(resolve, reject)&#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function()&#123; console.log('å¼‚æ­¥ä»»åŠ¡2æ‰§è¡Œå®Œæˆ'); resolve('éšä¾¿ä»€ä¹ˆæ•°æ®2'); &#125;, 2000); &#125;); return p; &#125;function runAsync3()&#123; var p = new Promise(function(resolve, reject)&#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function()&#123; console.log('å¼‚æ­¥ä»»åŠ¡3æ‰§è¡Œå®Œæˆ'); resolve('éšä¾¿ä»€ä¹ˆæ•°æ®3'); &#125;, 300); &#125;); return p; &#125;Promise.all([runAsync1(),runAsync2(),runAsync3()]) //æ—¶é—´çŸ­çš„å…ˆæ‰§è¡Œ.then(function(results)&#123; console.log(results); //è¿”å›å€¼æŒ‰ç…§æ•°æ®ä¸­æ–¹æ³•é¡ºåºè¾“å‡º&#125;);// å¼‚æ­¥ä»»åŠ¡3æ‰§è¡Œå®Œæˆ å¼‚æ­¥ä»»åŠ¡1æ‰§è¡Œå®Œæˆ å¼‚æ­¥ä»»åŠ¡2æ‰§è¡Œå®Œæˆ// ["éšä¾¿ä»€ä¹ˆæ•°æ®1", "éšä¾¿ä»€ä¹ˆæ•°æ®2", "éšä¾¿ä»€ä¹ˆæ•°æ®3"] raceçš„ç”¨æ³• å¼‚æ­¥æ‰§è¡Œæœ€å¿«çš„å‡½æ•°ä»¥åï¼Œç›´æ¥è¾“å‡ºå†…å®¹ï¼Œå†æŒ‰ç…§æ‰§è¡Œé€Ÿåº¦ä¾æ¬¡æ‰§è¡Œ 123456789101112131415161718192021222324252627282930313233343536function runAsync1()&#123; var p = new Promise(function(resolve, reject)&#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function()&#123; console.log('å¼‚æ­¥ä»»åŠ¡1æ‰§è¡Œå®Œæˆ'); resolve('éšä¾¿ä»€ä¹ˆæ•°æ®1'); &#125;, 3000); &#125;); return p; &#125;function runAsync2()&#123; var p = new Promise(function(resolve, reject)&#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function()&#123; console.log('å¼‚æ­¥ä»»åŠ¡2æ‰§è¡Œå®Œæˆ'); resolve('éšä¾¿ä»€ä¹ˆæ•°æ®2'); &#125;, 3000); &#125;); return p; &#125;function runAsync3()&#123; var p = new Promise(function(resolve, reject)&#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function()&#123; console.log('å¼‚æ­¥ä»»åŠ¡3æ‰§è¡Œå®Œæˆ'); resolve('éšä¾¿ä»€ä¹ˆæ•°æ®3'); &#125;, 1000); &#125;); return p; &#125;Promise.race([runAsync1(), runAsync2(), runAsync3()]).then(function(results)&#123; console.log(results);&#125;);//å¼‚æ­¥ä»»åŠ¡3æ‰§è¡Œå®Œæˆ éšä¾¿ä»€ä¹ˆæ•°æ®3 å¼‚æ­¥ä»»åŠ¡1æ‰§è¡Œå®Œæˆ å¼‚æ­¥ä»»åŠ¡2æ‰§è¡Œå®Œæˆ]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>Promiseçš„ä½¿ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Vueä¸­slotçš„ä½¿ç”¨ï¼ˆé€šä¿—æ˜“æ‡‚ï¼‰]]></title>
    <url>%2F2019%2F04%2F22%2Fslot%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[slot å¥½ä¹…æ²¡æ›´æ–°åšå®¢å•¦ï¼Œä»Šå¤©æˆ‘åˆå›æ¥å•¦ï¼ ä¸ºä»€ä¹ˆä¼šå‡ºç°æ’æ§½æˆ‘ä»¬ç»å¸¸éœ€è¦å‘ä¸€ä¸ªç»„ä»¶ä¼ é€’å†…å®¹ï¼Œåƒè¿™æ ·ï¼š 123&lt;alert-box&gt; Something bad happened&lt;/alert-box&gt; ä½†æ˜¯ç°å®å´æ˜¯å¾ˆæ®‹é…·ï¼Œå¯èƒ½ä¼šç»™ä½ æ¥ä¸ªError!Something bad happened å¥½å•¦ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥æ­£é¢˜å•¦ï¼ğŸ˜œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;div id="app"&gt; &lt;childer-component :items="items"&gt; &lt;h2&gt;å•ä¸ªæ’æ§½&lt;/h2&gt; &lt;span&gt;åªæœ‰åœ¨å­ç»„ä»¶ä½¿ç”¨å•ä¸ªæ’æ§½ slot æ‰èƒ½è®©æˆ‘æ˜¾ç¤ºå‡ºæ¥&lt;/span&gt; &lt;h2&gt;å¤šä¸ªæ’æ§½ä¹Ÿå«å…·åæ’æ§½&lt;/h2&gt; &lt;div slot="one"&gt; &lt;span&gt;one&lt;/span&gt; &lt;span&gt;ç¬¬ä¸€ä¸ª&lt;/span&gt; &lt;/div&gt; &lt;div slot="two"&gt; &lt;span&gt;two&lt;/span&gt; &lt;span&gt;ç¬¬äºŒä¸ª&lt;/span&gt; &lt;/div&gt; &lt;h2&gt;ä½œç”¨åŸŸæ’æ§½ï¼ˆå°†å­ç»„ä»¶çš„å€¼ä¼ åˆ°çˆ¶ç»„ä»¶ä¾›ä½¿ç”¨ï¼‰&lt;/h2&gt; &lt;div slot-scope="props"&gt; &lt;span&gt;&#123;&#123; props.addr &#125;&#125;&lt;/span&gt; &lt;span&gt;&#123;&#123; props.cname &#125;&#125;&lt;/span&gt; &lt;span&gt;&#123;&#123; props.age &#125;&#125;&lt;/span&gt; &lt;/div&gt; &lt;/childer-component&gt;&lt;/div&gt;&lt;script&gt; var childerComponent = Vue.component('childer-component',&#123; props:['items'], template:` &lt;div&gt; &lt;h1&gt;æˆ‘æ˜¯å­ç»„ä»¶&lt;/h1&gt; &lt;slot&gt;é»˜è®¤&lt;/slot&gt; &lt;slot name="one"&gt;&lt;/slot&gt; &lt;slot name="two"&gt;&lt;/slot&gt; &lt;slot :cname="items[2].cname"&gt;&lt;/slot&gt; &lt;slot :addr="items[2].addr"&gt;&lt;/slot&gt; &lt;slot age="18"&gt;&lt;/slot&gt; &lt;/div&gt; ` &#125;) var vm = new Vue(&#123; el: '#app', data: &#123; items:[ &#123; text:'æ–‡å­—1' , cname:'tom' , addr:'usa' &#125;, &#123; text:'æ–‡å­—2' , cname:'wangwu' , addr:'uk' &#125;, &#123; text:'æ–‡å­—3' , cname:'zhangsan' , addr:'un' &#125; ], components:&#123; 'childerComponent':childerComponent, &#125; &#125; &#125;)&lt;/script&gt;]]></content>
      <tags>
        <tag>slotçš„ä½¿ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¢ç©¶call å’Œ apply çš„åŸç†]]></title>
    <url>%2F2019%2F02%2F18%2F%E6%8E%A2%E7%A9%B6call-%E5%92%8C-apply-%E7%9A%84%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[éŸ³ä¹ğŸµæ­é…å­¦ä¹ æ›´ç¾å‘³å“¦ï¼ å»ºè®®çœ‹è¿™ç‰‡æ–‡ç« æ—¶å¯ä»¥ç‚¹å‡»éŸ³ä¹ğŸµï¼Œæ¥ä¸ªå•æ›²å¾ªï¼Œç¾æ»‹æ»‹ å…ˆæ‹¿callå¼€åˆ€ ä½œç”¨ï¼šcallå’Œapplyéƒ½æ˜¯æ›¿æ¢å‡½æ•°å†…é”™è¯¯çš„this 1234567var a = &#123; value:1&#125;var b = function()&#123; console.log(this.value) // å¦‚æœä¸å¯¹thisè¿›è¡Œç»‘å®šæ‰§è¡Œbar() ä¼šè¿”å›undefined&#125;b.call(a) //1 å»é™¤ç¹ççš„è®²è§£ï¼Œä¸€æ­¥åˆ°ä½è‡ªå·±æ¨¡æ‹Ÿcallçš„ç”¨æ³•å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾¾åˆ°ç›¸åŒç›®çš„ 1234567891011121314151617Function.prototype.myCall = function(context)&#123; var context = context || window; //å½“æ²¡ä¼ å…¥å€¼æ—¶å€™ï¼Œå°±æ˜¯æŒ‡å…¨å±€window context.fn = this; //æŠŠè°ƒç”¨myCallå‰çš„æ–¹æ³•ç¼“å­˜ä¸‹æ¥ var args = [...arguments].slice(1);//ä½¿ç”¨...æ‰“æ•£ä¼ å…¥å€¼ï¼Œå¹¶å»é™¤ç¬¬ä¸€æ–¹æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªæ•°ç»„ var result = context.fn(...args);//æŠŠæ•°ç»„æ‰“æ•£ï¼ŒæŠŠdinging 18ä¼ å…¥bæ–¹æ³•ä¸­ delete context.fn; //åˆ é™¤ return result&#125;var a = &#123; value:1&#125;var b = function(name,age)&#123; console.log(this.value) console.log(name) console.log(age)&#125;b.myCall(a,"dingding",18) apply applyçš„æ–¹æ³•å’Œ call æ–¹æ³•çš„å®ç°ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯å¦‚æœæœ‰å‚æ•°ï¼Œä»¥æ•°ç»„å½¢å¼è¿›è¡Œä¼ é€’ applyè¿™ä¸ªAPIå¹³æ—¶ä½¿ç”¨çš„åœºæ™¯ï¼Œä»£ç å¦‚ä¸‹:123456789var a = &#123; value:1&#125;var b = function(name,age)&#123; console.log(this.value) console.log(name) console.log(age)&#125;b.apply(a,["dingding",18]) ç›´æ¥ä¸Šæ¨¡æ‹ŸapplyåŠŸèƒ½ä»£ç 123456789101112131415161718192021Function.prototype.myApply = function(context)&#123; var context = context || window; context.fn = this; var result; if(arguments[1])&#123; result = context.fn(...arguments[1]) &#125;else&#123; result = context.fn() &#125; delete context.fn return result&#125;var a = &#123; value:1&#125;var b = function(name,age)&#123; console.log(this.value) console.log(name) console.log(age)&#125;b.myApply(a,["dingding",18]) å‚è€ƒèµ„æ–™]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>æ¢ç©¶call å’Œ apply çš„åŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›¾ç‰‡æ‡’åŠ è½½]]></title>
    <url>%2F2019%2F02%2F14%2F%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD%2F</url>
    <content type="text"><![CDATA[LazyLoad æ‡’åŠ è½½çš„æ„ä¹‰è¿™é‡Œâ€˜æ‡’â€™çš„æ„æ€å¯ä»¥ç†è§£ä¸ºå»¶è¿Ÿï¼Œå¦‚æ·˜å®ã€äº¬ä¸œè¿™äº›ç”µå•†å¹³å°æœ‰å¤§é‡çš„å›¾ç‰‡ï¼Œå¦‚æœä¸Šæ¥å°±åŠ è½½æœåŠ¡å™¨è¡¨ç¤ºå‹åŠ›å±±å¤§ï¼Œæ‰€ä»¥å°±æƒ³å‡ºäº†æ‡’åŠ è½½è¿™ç§å…‹æ•Œä¹‹æ³•ï¼Œç”¨æˆ·æ»šåŠ¨åˆ°çš„åŒºåŸŸæ‰å‘é€è¯·æ±‚åŠ è½½å†…å®¹ åŸç†å°†é¡µé¢ä¸­çš„imgæ ‡ç­¾srcæŒ‡å‘ä¸€å¼ å°ç…§ç‰‡æˆ–è€…ä¸ºç©ºéƒ½å¯ä»¥ï¼Œç„¶åå†™ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§æ¯”å¦‚ï¼ˆdata-srcï¼‰æŒ‡å‘æ­£ç¡®çš„å›¾ç‰‡ï¼Œå…¶å®å°±æ˜¯ç”¨æ­£ç¡®çš„ç…§ç‰‡æ›¿æ¢srcé‡Œé¢çš„ç…§ç‰‡ ä»£ç åœ¨å†™ä»£ç å‰ï¼Œéœ€è¦äº†è§£å„ç§é«˜åº¦ã€‚å…ˆçœ‹è¿™ç¯‡æ–‡ç« jsåæ ‡ä½ç½®1234567891011121314151617181920212223 &lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; img &#123; display: block; margin-bottom: 50px; width: 400px; height: 400px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;img src="" data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt=""&gt; &lt;img src="" data-src="http://ww1.sinaimg.cn/large/006y8mN6gw1fa7kaed2hpj30sg0l9q54.jpg" alt=""&gt; &lt;img src="" data-src="http://imgsrc.baidu.com/imgad/pic/item/3c6d55fbb2fb43161361e1432ba4462309f7d389.jpg" alt=""&gt; &lt;img src="" data-src="http://pic.58pic.com/58pic/15/68/59/71X58PICNjx_1024.jpg" alt=""&gt; &lt;img src="" data-src="http://qimg.hxnews.com/2019/0128/1548663985785.jpg" alt=""&gt; &lt;img src="" data-src="http://imgsrc.baidu.com/imgad/pic/item/242dd42a2834349bf8d014a3c3ea15ce37d3bec6.jpg" alt=""&gt; &lt;img src="" data-src="http://imgsrc.baidu.com/imgad/pic/item/d439b6003af33a87089f4704cc5c10385343b53a.jpg" alt=""&gt; &lt;img src="" data-src="http://imgsrc.baidu.com/imgad/pic/item/38dbb6fd5266d01607666e0b9d2bd40735fa3591.jpg" alt=""&gt; &lt;img src="" data-src="http://imgsrc.baidu.com/imgad/pic/item/d043ad4bd11373f02f236d8cae0f4bfbfbed0480.jpg" alt=""&gt;&lt;/body&gt; javascript1234567891011121314151617var num = document.getElementsByTagName('img').length;var img = document.getElementsByTagName("img");var n = 0; //å­˜å‚¨å›¾ç‰‡åŠ è½½åˆ°çš„ä½ç½®ï¼Œé¿å…æ¯æ¬¡éƒ½ä»ç¬¬ä¸€å¼ å›¾ç‰‡å¼€å§‹éå†lazyload(); //é¡µé¢è½½å…¥å®Œæ¯•åŠ è½½å¯æ˜¯åŒºåŸŸå†…çš„å›¾ç‰‡window.onscroll = lazyload;function lazyload() &#123; //ç›‘å¬é¡µé¢æ»šåŠ¨äº‹ä»¶ var seeHeight = document.documentElement.clientHeight; //å¯è§åŒºåŸŸé«˜åº¦ var scrollTop = document.documentElement.scrollTop || document.body.scrollTop; //æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨é«˜åº¦ for (var i = n; i &lt; num; i++) &#123; if (img[i].offsetTop &lt; seeHeight + scrollTop) &#123; if (img[i].getAttribute("src") == "") &#123; img[i].src = img[i].getAttribute("data-src"); &#125; n = i + 1; &#125; &#125;&#125; ä½¿ç”¨èŠ‚æµå‡½æ•°è¿›è¡Œæ€§èƒ½ä¼˜åŒ–å¦‚æœç›´æ¥å°†å‡½æ•°ç»‘å®šåœ¨scrolläº‹ä»¶ä¸Šï¼Œå½“é¡µé¢æ»šåŠ¨æ—¶ï¼Œå‡½æ•°ä¼šè¢«é«˜é¢‘è§¦å‘ï¼Œè¿™éå¸¸å½±å“æµè§ˆå™¨çš„æ€§èƒ½ã€‚æˆ‘æƒ³å®ç°é™åˆ¶è§¦å‘é¢‘ç‡ï¼Œæ¥ä¼˜åŒ–æ€§èƒ½ã€‚ èŠ‚æµå‡½æ•°ï¼šåªå…è®¸ä¸€ä¸ªå‡½æ•°åœ¨Nç§’å†…æ‰§è¡Œä¸€æ¬¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªé€šä¿—æ˜“é€šçš„èŠ‚æµå‡½æ•°ï¼š1234567891011121314151617181920212223242526var num = document.getElementsByTagName('img').length;var img = document.getElementsByTagName("img");var n = 0; //å­˜å‚¨å›¾ç‰‡åŠ è½½åˆ°çš„ä½ç½®ï¼Œé¿å…æ¯æ¬¡éƒ½ä»ç¬¬ä¸€å¼ å›¾ç‰‡å¼€å§‹éå†resizehandler(); //é¡µé¢è½½å…¥å®Œæ¯•åŠ è½½å¯æ˜¯åŒºåŸŸå†…çš„å›¾ç‰‡n=0;function resizehandler()&#123; var seeHeight = document.documentElement.clientHeight; //å¯è§åŒºåŸŸé«˜åº¦ var scrollTop = document.documentElement.scrollTop || document.body.scrollTop; //æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨é«˜åº¦ for (var i = n; i &lt; num; i++) &#123; if (img[i].offsetTop &lt; seeHeight + scrollTop) &#123; if (img[i].getAttribute("src") == "") &#123; img[i].src = img[i].getAttribute("data-src"); &#125; n = i + 1; &#125; &#125;&#125;function throttle(method,context)&#123; clearTimeout(method.tId); method.tId=setTimeout(function()&#123; method.call(context); &#125;,500);&#125;window.onscroll=function()&#123; throttle(resizehandler,window);&#125; å‡½æ•°èŠ‚æµæ–¹æ¡ˆä»¥ä¸‹ä¸‰ç§æ—¶é—´æˆ³æ–¹æ¡ˆ1234567891011121314151617181920212223242526272829 var num = document.getElementsByTagName('img').length; var img = document.getElementsByTagName("img"); var n = 0; //å­˜å‚¨å›¾ç‰‡åŠ è½½åˆ°çš„ä½ç½®ï¼Œé¿å…æ¯æ¬¡éƒ½ä»ç¬¬ä¸€å¼ å›¾ç‰‡å¼€å§‹éå† lazyload(); //é¡µé¢è½½å…¥å®Œæ¯•åŠ è½½å¯æ˜¯åŒºåŸŸå†…çš„å›¾ç‰‡ function lazyload() &#123; //ç›‘å¬é¡µé¢æ»šåŠ¨äº‹ä»¶ var seeHeight = document.documentElement.clientHeight; //å¯è§åŒºåŸŸé«˜åº¦ var scrollTop = document.documentElement.scrollTop || document.body.scrollTop; //æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨é«˜åº¦ for (var i = n; i &lt; num; i++) &#123; if (img[i].offsetTop &lt; seeHeight + scrollTop) &#123; if (img[i].getAttribute("src") == "") &#123; img[i].src = img[i].getAttribute("data-src"); &#125; n = i + 1; &#125; &#125; &#125;--------------------------------- ä»¥ä¸Šä»£ç ä¸åœ¨é‡å¤ -------------------------------- var throttle = function(fun,delay)&#123; var perv = Date.now(); return function()&#123; var context = this; var now = Date.now(); if (now-perv &gt;= delay)&#123; fun.apply(context,arguments) prev = Date.now(); &#125; &#125; &#125; window.addEventListener('scroll',throttle(lazyload,1000)) å®šæ—¶å™¨æ–¹æ¡ˆ12345678910111213var throttle = function(fun,delay)&#123; var timer = null; return function()&#123; var context = this; if(!timer)&#123; timer = setTimeout(function()&#123; fun.apply(context,arguments) timer = null &#125;,delay) &#125; &#125;&#125;window.addEventListener('scroll',throttle(lazyload,1000)) æ—¶é—´æˆ³+å®šæ—¶å™¨æ–¹æ¡ˆ123456789101112131415161718var throttle = function(fun,delay)&#123; var timer = null; var startTime = Date.now(); return function() &#123; var curTime = Date.now(); var remaining = delay - (curTime - startTime); var context = this; var args = arguments; clearTimeout(timer); if (remaining &lt;= 0) &#123; fun.apply(context, args); startTime = Date.now(); &#125; else &#123; timer = setTimeout(fun, remaining); &#125; &#125;&#125;window.addEventListener('scroll',throttle(lazyload,1000))]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>å›¾ç‰‡æ‡’åŠ è½½</tag>
        <tag>å‡½æ•°èŠ‚æµ3ç§æ–¹å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsè·å–äº‹ä»¶åæ ‡ä½ç½®]]></title>
    <url>%2F2019%2F02%2F14%2Fjs%E8%8E%B7%E5%8F%96%E4%BA%8B%E4%BB%B6%E5%9D%90%E6%A0%87%E4%BD%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[å¿ƒæœ‰çŒ›è™ï¼Œç»†å—…è”·è–‡ å…³äºscrollTop,offsetTop,scrollLeft,offsetLeftç”¨æ³•ä»‹ç»12345678910111213é¡µå¯è§åŒºåŸŸå®½ï¼š document.body.clientWidth;ç½‘é¡µå¯è§åŒºåŸŸé«˜ï¼š document.body.clientHeight;ç½‘é¡µå¯è§åŒºåŸŸå®½ï¼š document.body.offsetWidth (åŒ…æ‹¬è¾¹çº¿çš„å®½);ç½‘é¡µå¯è§åŒºåŸŸé«˜ï¼š document.body.offsetHeight (åŒ…æ‹¬è¾¹çº¿çš„å®½);ç½‘é¡µæ­£æ–‡å…¨æ–‡å®½ï¼š document.body.scrollWidth;ç½‘é¡µæ­£æ–‡å…¨æ–‡é«˜ï¼š document.body.scrollHeight;ç½‘é¡µè¢«å·å»çš„é«˜ï¼š document.body.scrollTop;ç½‘é¡µè¢«å·å»çš„å·¦ï¼š document.body.scrollLeft;ç½‘é¡µæ­£æ–‡éƒ¨åˆ†ä¸Šï¼š window.screenTop;ç½‘é¡µæ­£æ–‡éƒ¨åˆ†å·¦ï¼š window.screenLeft;å±å¹•åˆ†è¾¨ç‡çš„é«˜ï¼š window.screen.height;å±å¹•åˆ†è¾¨ç‡çš„å®½ï¼š window.screen.width;å±å¹•å¯ç”¨å·¥ä½œåŒºé«˜åº¦ï¼š window.screen.availHeight; äº‹ä»¶åæ ‡äº‹ä»¶1.ç›¸å¯¹äºæ˜¾ç¤ºå±å·¦ä¸Šè§’:e.screenX,e.screenY2.ç›¸å¯¹äºæ–‡æ¡£æ˜¾ç¤ºåŒºå·¦ä¸Šè§’:e.clientX,e.clientY3.ç›¸å¯¹äºdivå·¦ä¸Šè§’:e.offsetX,e.offsetY é¡µé¢æ»šåŠ¨äº‹ä»¶window.onscroll å½“é¡µé¢æ»šåŠ¨æ—¶è§¦å‘ è·å–æ»šåŠ¨è·ç¦»ï¼šdocument.body.scrollTop | | document.documentElement.scrollTop ä¸»åŠ¨æ§åˆ¶é¡µé¢çš„æ»šåŠ¨ä½ç½®ï¼š window.scrollToï¼ˆæ¨ªå‘æ»šåŠ¨åˆ°çš„ä½ç½®ï¼Œçºµå‘æ»šåŠ¨åˆ°çš„ä½ç½®ï¼‰ window.scrollBy(æ¨ªå‘æ»šåŠ¨çš„è·ç¦»ï¼Œçºµå‘æ»šåŠ¨çš„è·ç¦») å‚è€ƒèµ„æ–™ææ¸…clientHeightã€offsetHeightã€scrollHeightã€offsetTopã€scrollTop]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>screenX/screenY</tag>
        <tag>clientX/slientY</tag>
        <tag>offsetX/offsetY</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±åº¦å­¦ä¹ ä¹‹ç¥ç»ç½‘ç»œ]]></title>
    <url>%2F2019%2F02%2F04%2F%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%B9%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æ˜¯19å¹´é™¤å¤•å¤œ ç¥ç»ç½‘ç»œå‚è€ƒè§†é¢‘ ç¥ç»å…ƒâ€”â€”â€”â€”æœ€å°çš„ç¥ç»ç½‘ç»œ æ€»ç»“å¤ªæ¯ç‡¥çœ‹ä¸ä¸‹å»äº† ğŸ˜‚]]></content>
      <categories>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>ç¥ç»ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒºå—é“¾ç†è®ºå’Œä»£ç æ¼”ç¤º]]></title>
    <url>%2F2019%2F02%2F03%2F%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%2F</url>
    <content type="text"><![CDATA[ä¸€åœºæ²¡æœ‰è¯—å’Œè¿œæ–¹ï¼Œå…¨æ˜¯è‹Ÿä¸”çš„æ¼”è®² æ— æ„é—´çœ‹æ™“è¯´ï¼Œä»–è¯´5Gå¯¹ä»¥åçš„å½±å“ï¼Œå…¶ä¸­æœ‰ä¸ªæ•°æ®åˆ†å‘ä½¿ç”¨äº†æ¯”ç‰¹å¸æŠ€æœ¯ï¼Œå¯¹æ­¤æŸ¥é˜…èµ„æ–™åŠè§†é¢‘è¿›è¡Œå­¦ä¹ ï¼Œä»¥ä¸‹ä¸ºä¸ªäººæ€»ç»“å‚è€ƒèµ„æ–™å¦‚ä½• æ™“è¯´è§†é¢‘ è®²è§£åŒºå—é“¾åŸç†è§†é¢‘ åŒºå—é“¾ä»£ç å®ç°è§†é¢‘ ä»¥å¤ªåŠå¼€æºä»£ç  ä»¥å¤ªåŠï¼ˆè‹±æ–‡Ethereumï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„æœ‰æ™ºèƒ½åˆçº¦åŠŸèƒ½çš„å…¬å…±åŒºå—é“¾å¹³å°ï¼Œé€šè¿‡å…¶ä¸“ç”¨åŠ å¯†è´§å¸ä»¥å¤ªå¸ï¼ˆEtherï¼‰æä¾›å»ä¸­å¿ƒåŒ–çš„ä»¥å¤ªè™šæ‹Ÿæœºï¼ˆEthereum Virtual Machineï¼‰æ¥å¤„ç†ç‚¹å¯¹ç‚¹åˆçº¦ã€‚ åŒºå—é“¾åŸºæœ¬åŸå‹ åŒºå—é“¾æœ¬è´¨å°±æ˜¯ åˆ†å¸ƒå¼æ•°æ®åº“ åŒºå—é“¾æ˜¯ å…¬å¼€çš„æ•°æ®åº“ï¼Œä¸æ˜¯ç§äººçš„æ•°æ®åº“ åŒºå—é“¾æ˜¯åŠ å¯†è´§å¸å’Œæ™ºèƒ½åˆçº¦çš„åŸºç¡€ è§£å†³å»ä¸­å¿ƒé—®é¢˜é—®ï¼šå¦‚ä½•å¿«é€ŸéªŒè¯å“ªä¸ªæ•°æ®æ‰æ˜¯æ­£ç¡®çš„ï¼Ÿç­”ï¼šæ¯æ¬¡äº¤æ˜“éƒ½è®°å½• åºå·/æ—¶é—´æˆ³/hashå€¼ï¼Œå½¢æˆä¸€ä¸ªåŒºå—é“¾ï¼Œå’Œå…¶ä»–åŒºå—è¿›è¡Œå¯¹æ¯” å¦‚ä½•ç¡®å®šä½¿ç”¨æƒã€‚é—®ï¼šè´¦æˆ·æ‰€æœ‰æƒé—®é¢˜ ç­”ï¼šåœ°å€æ˜¯ç”¨å…¬é’¥é€šè¿‡hashå€¼ç”Ÿæˆçš„ï¼Œå€¼å†è¿›è¡ŒBase58è¿›è¡Œç¼–ç çš„å€¼,è°ç”¨è¿™ä¸ªåœ°å€æ”¯ä»˜ï¼Œè°å°±æ‹¥æœ‰è¿™ä¸ªåœ°å€çš„æ‰€æœ‰æƒ,è°æœ‰è¿™ä¸ªç§é’¥ï¼Œè°å°±èƒ½ç”¨è¿™ä¸ªåœ°å€æ”¯ä»˜ï¼Œä¸¢å¤±ç§é’¥å°±æ˜¯ä¸¢å¤±ä½¿ç”¨æƒä¸èƒ½è¡¥åŠ ä½¿ç”¨goè¯­è¨€æ¨¡æ‹ŸåŒºå—é“¾æŠ€æœ¯åŸºæœ¬åŸç† æŒ–çŸ¿çš„æœ¬è´¨ä½¿ç”¨è®¡ç®—æœºè®¡ç®—ï¼Œå‰é¢è¿ç»­éƒ½æ˜¯é›¶çš„ä¸€ä¸²ï¼Œè®°å½•äº¤æ˜“ä¿¡æ¯çš„ç‰¹æ®Šçš„hashå€¼ç”Ÿäº§çš„ç¼–ç ]]></content>
      <categories>
        <category>åŒºå—é“¾</category>
      </categories>
      <tags>
        <tag>åŒºå—é“¾ç†è®ºå’Œä»£ç æ¼”ç¤º</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Vuejsæºç è§£æ]]></title>
    <url>%2F2019%2F01%2F31%2FVuejs%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[é™¤äº†ä½¿ç”¨vueå·¥å…·ï¼Œæ›´æƒ³æ­å¼€ç¥ç§˜é¢çº±,å¼€å§‹ä¸€åœºç¥ç§˜ä¹‹æ—…å§ vue.jsæºç åœ°å€ çœ‹åæ„Ÿè§‰å†…å®¹ä¸é”™çš„å‚è€ƒèµ„æ–™1.VueæŠ€æœ¯å†…å¹• ä»ä¸€ä¸ªç®€å•çš„exampleå¼€å§‹12345678&lt;div id="app"&gt;&#123;&#123;test&#125;&#125;&lt;/div&gt;var vm = new Vue(&#123;el: '#app',data: &#123; test: 1 &#125;&#125;) è¿™æ®µä»£ç ç®€å•è°ƒç”¨äº†Vueï¼Œä¼ é€’äº†ä¸¤ä¸ªé€‰é¡¹ el å’Œ data,è¿™æ®µä»£ç åœ¨é¡µé¢å‘ˆç°çš„DOMå¦‚ä¸‹:1&lt;div id="app"&gt;1&lt;div&gt; æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ä¸Šé¢çš„ä¾‹å­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿé¦–å…ˆå½“æˆ‘ä»¬ä½¿ç”¨Vueæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œç¬¬ä¸€å¥æ‰§è¡Œçš„ä»£ç åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰¾åˆ°Vueçš„æ„é€ å‡½æ•°ï¼ŒVueçš„æ„é€ å‡½æ•°åœ¨core/instance/index.js 12345678function Vue (options) &#123; if (process.env.NODE_ENV !== 'production' &amp;&amp; !(this instanceof Vue) ) &#123; warn('Vue is a constructor and should be called with the `new` keyword') &#125; this._init(options)&#125; ä¸Šé¢çš„ä»£ç ä¸€ç›®äº†ç„¶ï¼Œå½“new Vueæ„é€ å‡½æ•°æ—¶ï¼Œæ‰§è¡Œçš„ç¬¬ä¸€å¥ä»£ç æ—¶this._init(options)æ–¹æ³•ï¼Œoptionså‚æ•°å†…å®¹æ˜¯æˆ‘ä»¬è°ƒç”¨Vueæ„é€ å‡½æ•°ä¼ å…¥çš„ 123456options = &#123; el:'#app', data:&#123; test:1 &#125;&#125; æ—¢ç„¶å¦‚æ­¤æˆ‘ä»¬å°±æ‰¾åˆ° _initæ–¹æ³•ï¼Œ_init æ–¹æ³•åœ¨ src/core/instance/init.js æ–‡ä»¶è¢«æ·»åŠ åˆ° Vue çš„åŸå‹ä¸Šï¼Œä¸‹é¢æˆ‘ä»¬å°±çœ‹çœ‹ _init åšäº†ä»€ä¹ˆã€‚_init æ–¹æ³•çš„ä¸€å¼€å§‹ï¼Œæ˜¯è¿™ä¸¤å¥ä»£ç ï¼š123const vm: Component = this// a uidvm._uid = uid++ é¦–å…ˆå£°æ˜äº†ä¸€ä¸ªå¸¸é‡vmï¼Œå¹¶ä¸”åœ¨vmä¸Šæ·»åŠ äº†ä¸€ä¸ªå±æ€§ _uidï¼Œuidçš„åˆå§‹å€¼æ˜¯0æ¯æ¬¡å®ä¾‹åŒ–ä¸€ä¸ª Vue å®ä¾‹ä¹‹åï¼Œuid çš„å€¼éƒ½ä¼š ++ã€‚ æ¥ä¸‹å»çš„ä»£ç å¦‚ä¸‹1234567let startTag, endTag/* istanbul ignore if */if (process.env.NODE_ENV !== 'production' &amp;&amp; config.performance &amp;&amp; mark) &#123; startTag = `vue-perf-start:$&#123;vm._uid&#125;` endTag = `vue-perf-end:$&#123;vm._uid&#125;` mark(startTag)&#125; é¦–å…ˆå£°æ˜äº†startTag, endTagè¿™ä¸¤ä¸ªå‚æ•°(parameter)ï¼Œå…¶ä¸­ifæ‹¬å·ä¸­çš„æ„æ€æ˜¯ï¼šåœ¨éç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå¹¶ä¸”config.performanceå’Œmarkéƒ½ä¸ºçœŸï¼Œæ‰æ‰§è¡Œé‡Œé¢çš„ä»£ç ï¼Œå…¶ä¸­ config.performance æ¥è‡ªäº core/config.js æ–‡ä»¶ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒVue.config åŒæ ·å¼•ç”¨äº†è¿™ä¸ªå¯¹è±¡ï¼Œåœ¨ Vue çš„å®˜æ–¹æ–‡æ¡£ä¸­å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼šVue æä¾›äº†å…¨å±€é…ç½® Vue.config.performanceï¼Œæˆ‘ä»¬é€šè¿‡å°†å…¶è®¾ç½®ä¸º trueï¼Œå³å¯å¼€å¯æ€§èƒ½è¿½è¸ª ä½ å¯ä»¥è¿½è¸ªå››ä¸ªåœºæ™¯çš„æ€§èƒ½1ã€ç»„ä»¶åˆå§‹åŒ–(component init)2ã€ç¼–è¯‘(compile)ï¼Œå°†æ¨¡æ¿(template)ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°3ã€æ¸²æŸ“(render)ï¼Œå…¶å®å°±æ˜¯æ¸²æŸ“å‡½æ•°çš„æ€§èƒ½ï¼Œæˆ–è€…è¯´æ¸²æŸ“å‡½æ•°æ‰§è¡Œä¸”ç”Ÿæˆè™šæ‹ŸDOM(vnode)çš„æ€§èƒ½4ã€æ‰“è¡¥ä¸(patch)ï¼Œå°†è™šæ‹ŸDOMæ¸²æŸ“ä¸ºçœŸå®DOMçš„æ€§èƒ½]]></content>
  </entry>
  <entry>
    <title><![CDATA[vueä¸­diffç®—æ³•è¯¦è§£]]></title>
    <url>%2F2019%2F01%2F30%2Fvue-diff%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[å¯ä»¥å…ˆçœ‹Vuejsè¿è¡Œæœºåˆ¶ å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œvueæ˜¯æ€ä¹ˆæ›´æ–°èŠ‚ç‚¹çš„ï¼Ÿè¦çŸ¥é“æ¸²æŸ“çœŸå®DOMçš„å¼€é”€æ˜¯å¾ˆå¤§çš„ï¼Œæ¯”å¦‚æœ‰æ—¶å€™æˆ‘ä»¬ä¿®æ”¹äº†æŸä¸ªæ•°æ®ï¼Œå¦‚æœç›´æ¥æ¸²æŸ“åˆ°çœŸå®domä¸Šä¼šå¼•èµ·æ•´ä¸ªdomæ ‘çš„é‡ç»˜å’Œé‡æ’ï¼Œæœ‰æ²¡æœ‰å¯èƒ½æˆ‘ä»¬åªæ›´æ–°æˆ‘ä»¬ä¿®æ”¹çš„é‚£ä¸€å°å—domè€Œä¸è¦æ›´æ–°æ•´ä¸ªdomå‘¢ï¼Ÿdiffç®—æ³•èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ã€‚ æˆ‘ä»¬å…ˆæ ¹æ®çœŸå®DOMç”Ÿæˆä¸€é¢—virtual DOMï¼Œå½“virtual DOMæŸä¸ªèŠ‚ç‚¹çš„æ•°æ®æ”¹å˜åä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„Vnodeï¼Œç„¶åVnodeå’ŒoldVnodeä½œå¯¹æ¯”ï¼Œå‘ç°æœ‰ä¸ä¸€æ ·çš„åœ°æ–¹å°±ç›´æ¥ä¿®æ”¹åœ¨çœŸå®çš„DOMä¸Šï¼Œç„¶åä½¿oldVnodeçš„å€¼ä¸ºVnodeã€‚ diffçš„è¿‡ç¨‹å°±æ˜¯è°ƒç”¨åä¸ºpatchçš„å‡½æ•°ï¼Œæ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹ï¼Œä¸€è¾¹æ¯”è¾ƒä¸€è¾¹ç»™çœŸå®çš„DOMæ‰“è¡¥ä¸ã€‚ virtual DOMå’ŒçœŸå®DOMçš„åŒºåˆ«ï¼Ÿvirtual DOMæ˜¯å°†çœŸå®çš„DOMçš„æ•°æ®æŠ½å–å‡ºæ¥ï¼Œä»¥å¯¹è±¡çš„å½¢å¼æ¨¡æ‹Ÿæ ‘å½¢ç»“æ„ã€‚æ¯”å¦‚domæ˜¯è¿™æ ·çš„ï¼š123456789101112 &lt;div&gt; &lt;p&gt;123&lt;/p&gt; &lt;/div&gt;å¯¹åº”çš„virtual DOMï¼ˆä¼ªä»£ç ï¼‰ï¼š var Vnode = &#123; tag: 'div', children: [ &#123; tag: 'p', text: '123' &#125; ] &#125;; ï¼ˆæ¸©é¦¨æç¤ºï¼šVNodeå’ŒoldVNodeéƒ½æ˜¯å¯¹è±¡ï¼Œä¸€å®šè¦è®°ä½ï¼‰ diffçš„æ¯”è¾ƒæ–¹å¼ï¼Ÿåœ¨é‡‡å–diffç®—æ³•æ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ¯”è¾ƒåªä¼šåœ¨åŒå±‚çº§è¿›è¡Œ, ä¸ä¼šè·¨å±‚çº§æ¯”è¾ƒã€‚1234567&lt;div&gt; &lt;p&gt;123&lt;/p&gt;&lt;/div&gt;&lt;div&gt; &lt;span&gt;456&lt;/span&gt;&lt;/div&gt; ä¸Šé¢çš„ä»£ç ä¼šåˆ†åˆ«æ¯”è¾ƒåŒä¸€å±‚çš„ä¸¤ä¸ªdivä»¥åŠç¬¬äºŒå±‚çš„på’Œspanï¼Œä½†æ˜¯ä¸ä¼šæ‹¿divå’Œspanä½œæ¯”è¾ƒã€‚åœ¨åˆ«å¤„çœ‹åˆ°çš„ä¸€å¼ å¾ˆå½¢è±¡çš„å›¾ï¼š diffæµç¨‹å›¾å½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œsetæ–¹æ³•ä¼šè®©è°ƒç”¨Dep.notifyé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…Watcherï¼Œè®¢é˜…è€…å°±ä¼šè°ƒç”¨patchç»™çœŸå®çš„DOMæ‰“è¡¥ä¸ï¼Œæ›´æ–°ç›¸åº”çš„è§†å›¾ å…·ä½“åˆ†æpatchæ¥çœ‹çœ‹patchæ˜¯æ€ä¹ˆæ‰“è¡¥ä¸çš„ï¼ˆä»£ç åªä¿ç•™æ ¸å¿ƒéƒ¨åˆ†ï¼‰123456789101112131415161718function patch (oldVnode,vnode)&#123; //some code if(sameVnode(oldVnode,vnode))&#123; patchVnode(oldVnode,vnode) &#125;else&#123; const oEl = oldVnode.el //å½“å‰oldVnodeå¯¹åº”çš„çœŸå®å…ƒç´ èŠ‚ç‚¹ let parentEle = api.parentNode(oEl) //çˆ¶å…ƒç´  createEle(vnode) //æ ¹æ®Vnodeç”Ÿæˆæ–°å…ƒç´  if (parentEle !== null) &#123; // å°†æ–°å…ƒç´ æ·»åŠ è¿›çˆ¶å…ƒç´  api.insertBefore(parentEle, vnode.el, api.nextSibling(oEl)) api.removeChild(parentEle, oldVnode.el) // ç§»é™¤ä»¥å‰çš„æ—§å…ƒç´ èŠ‚ç‚¹ oldVnode = null &#125; &#125; // some code return vnode&#125; patchå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°oldVnodeå’ŒVnodeåˆ†åˆ«ä»£è¡¨æ–°çš„èŠ‚ç‚¹å’Œä¹‹å‰çš„æ—§èŠ‚ç‚¹ åˆ¤æ–­ä¸¤èŠ‚ç‚¹æ˜¯å¦å€¼å¾—æ¯”è¾ƒï¼Œå€¼å¾—æ¯”è¾ƒåˆ™æ‰§è¡ŒpatchVnode12345678910function sameVnode (a, b) &#123; return ( a.key === b.key &amp;&amp; // keyå€¼ a.tag === b.tag &amp;&amp; // æ ‡ç­¾å a.isComment === b.isComment &amp;&amp; // æ˜¯å¦ä¸ºæ³¨é‡ŠèŠ‚ç‚¹ // æ˜¯å¦éƒ½å®šä¹‰äº†dataï¼ŒdataåŒ…å«ä¸€äº›å…·ä½“ä¿¡æ¯ï¼Œä¾‹å¦‚onclick , style isDef(a.data) === isDef(b.data) &amp;&amp; sameInputType(a, b) // å½“æ ‡ç­¾æ˜¯&lt;input&gt;çš„æ—¶å€™ï¼Œtypeå¿…é¡»ç›¸åŒ )&#125; ä¸å€¼å¾—æ¯”è¾ƒåˆ™ç”¨Vnodeæ›¿æ¢oldVnodeå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±æ·±å…¥æ£€æŸ¥ä»–ä»¬çš„å­èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹ä¸ä¸€æ ·é‚£å°±è¯´æ˜Vnodeå®Œå…¨è¢«æ”¹å˜äº†ï¼Œå°±å¯ä»¥ç›´æ¥æ›¿æ¢oldVnodeã€‚ è™½ç„¶è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¸ä¸€æ ·ä½†æ˜¯ä»–ä»¬çš„å­èŠ‚ç‚¹ä¸€æ ·æ€ä¹ˆåŠï¼Ÿåˆ«å¿˜äº†ï¼Œdiffå¯æ˜¯é€å±‚æ¯”è¾ƒçš„ï¼Œå¦‚æœç¬¬ä¸€å±‚ä¸ä¸€æ ·é‚£ä¹ˆå°±ä¸ä¼šç»§ç»­æ·±å…¥æ¯”è¾ƒç¬¬äºŒå±‚äº†ã€‚ï¼ˆæˆ‘åœ¨æƒ³è¿™ç®—æ˜¯ä¸€ä¸ªç¼ºç‚¹å—ï¼Ÿç›¸åŒå­èŠ‚ç‚¹ä¸èƒ½é‡å¤åˆ©ç”¨äº†â€¦å…¶å®æ²¡è¿™ä¹ˆç®€å•ï¼Œå®ƒåˆ©ç”¨é—­åŒ…æœ‰ä¸ªç¼“å­˜æœºåˆ¶ï¼‰ patchVnodeå½“æˆ‘ä»¬ç¡®å®šä¸¤ä¸ªèŠ‚ç‚¹å€¼å¾—æ¯”è¾ƒä¹‹åæˆ‘ä»¬ä¼šå¯¹ä¸¤ä¸ªèŠ‚ç‚¹æŒ‡å®špatchVnodeæ–¹æ³•ã€‚é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•åšäº†ä»€ä¹ˆå‘¢ï¼Ÿ1234567891011121314151617 patchVnode (oldVnode, vnode) &#123; const el = vnode.el = oldVnode.el let i, oldCh = oldVnode.children, ch = vnode.children if (oldVnode === vnode) return if (oldVnode.text !== null &amp;&amp; vnode.text !== null &amp;&amp; oldVnode.text !== vnode.text) &#123; api.setTextContent(el, vnode.text) &#125;else &#123; updateEle(el, vnode, oldVnode) if (oldCh &amp;&amp; ch &amp;&amp; oldCh !== ch) &#123; updateChildren(el, oldCh, ch) &#125;else if (ch)&#123; createEle(vnode) //create el's children dom &#125;else if (oldCh)&#123; api.removeChildren(el) &#125; &#125;&#125; è¿™ä¸ªå‡½æ•°åšäº†ä»¥ä¸‹äº‹æƒ…ï¼š æ‰¾åˆ°å¯¹åº”çš„çœŸå®domï¼Œç§°ä¸ºelåˆ¤æ–­Vnodeå’ŒoldVnodeæ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆç›´æ¥returnå¦‚æœä»–ä»¬éƒ½æœ‰æ–‡æœ¬èŠ‚ç‚¹å¹¶ä¸”ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆå°†elçš„æ–‡æœ¬èŠ‚ç‚¹è®¾ç½®ä¸ºVnodeçš„æ–‡æœ¬èŠ‚ç‚¹ã€‚å¦‚æœoldVnodeæœ‰å­èŠ‚ç‚¹è€ŒVnodeæ²¡æœ‰ï¼Œåˆ™åˆ é™¤elçš„å­èŠ‚ç‚¹å¦‚æœoldVnodeæ²¡æœ‰å­èŠ‚ç‚¹è€ŒVnodeæœ‰ï¼Œåˆ™å°†Vnodeçš„å­èŠ‚ç‚¹çœŸå®åŒ–ä¹‹åæ·»åŠ åˆ°elå¦‚æœä¸¤è€…éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡ŒupdateChildrenå‡½æ•°æ¯”è¾ƒå­èŠ‚ç‚¹ï¼Œè¿™ä¸€æ­¥å¾ˆé‡è¦å…¶ä»–å‡ ä¸ªç‚¹éƒ½å¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬è¯¦ç»†æ¥è®²ä¸€ä¸‹updateChildren updateChildren123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869 updateChildren (parentElm, oldCh, newCh) &#123; let oldStartIdx = 0, newStartIdx = 0 let oldEndIdx = oldCh.length - 1 let oldStartVnode = oldCh[0] let oldEndVnode = oldCh[oldEndIdx] let newEndIdx = newCh.length - 1 let newStartVnode = newCh[0] let newEndVnode = newCh[newEndIdx] let oldKeyToIdx let idxInOld let elmToMove let before while (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) &#123; if (oldStartVnode == null) &#123; // å¯¹äºvnode.keyçš„æ¯”è¾ƒï¼Œä¼šæŠŠoldVnode = null oldStartVnode = oldCh[++oldStartIdx] &#125;else if (oldEndVnode == null) &#123; oldEndVnode = oldCh[--oldEndIdx] &#125;else if (newStartVnode == null) &#123; newStartVnode = newCh[++newStartIdx] &#125;else if (newEndVnode == null) &#123; newEndVnode = newCh[--newEndIdx] &#125;else if (sameVnode(oldStartVnode, newStartVnode)) &#123; patchVnode(oldStartVnode, newStartVnode) oldStartVnode = oldCh[++oldStartIdx] newStartVnode = newCh[++newStartIdx] &#125;else if (sameVnode(oldEndVnode, newEndVnode)) &#123; patchVnode(oldEndVnode, newEndVnode) oldEndVnode = oldCh[--oldEndIdx] newEndVnode = newCh[--newEndIdx] &#125;else if (sameVnode(oldStartVnode, newEndVnode)) &#123; patchVnode(oldStartVnode, newEndVnode) api.insertBefore(parentElm, oldStartVnode.el, api.nextSibling(oldEndVnode.el)) oldStartVnode = oldCh[++oldStartIdx] newEndVnode = newCh[--newEndIdx] &#125;else if (sameVnode(oldEndVnode, newStartVnode)) &#123; patchVnode(oldEndVnode, newStartVnode) api.insertBefore(parentElm, oldEndVnode.el, oldStartVnode.el) oldEndVnode = oldCh[--oldEndIdx] newStartVnode = newCh[++newStartIdx] &#125;else &#123; // ä½¿ç”¨keyæ—¶çš„æ¯”è¾ƒ if (oldKeyToIdx === undefined) &#123; oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx) // æœ‰keyç”Ÿæˆindexè¡¨ &#125; idxInOld = oldKeyToIdx[newStartVnode.key] if (!idxInOld) &#123; api.insertBefore(parentElm, createEle(newStartVnode).el, oldStartVnode.el) newStartVnode = newCh[++newStartIdx] &#125; else &#123; elmToMove = oldCh[idxInOld] if (elmToMove.sel !== newStartVnode.sel) &#123; api.insertBefore(parentElm, createEle(newStartVnode).el, oldStartVnode.el) &#125;else &#123; patchVnode(elmToMove, newStartVnode) oldCh[idxInOld] = null api.insertBefore(parentElm, elmToMove.el, oldStartVnode.el) &#125; newStartVnode = newCh[++newStartIdx] &#125; &#125; &#125; if (oldStartIdx &gt; oldEndIdx) &#123; before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].el addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx) &#125;else if (newStartIdx &gt; newEndIdx) &#123; removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx) &#125;&#125; å…ˆè¯´ä¸€ä¸‹è¿™ä¸ªå‡½æ•°åšäº†ä»€ä¹ˆ å°†Vnodeçš„å­èŠ‚ç‚¹Vchå’ŒoldVnodeçš„å­èŠ‚ç‚¹oldChæå–å‡ºæ¥ oldChå’ŒvChå„æœ‰ä¸¤ä¸ªå¤´å°¾çš„å˜é‡StartIdxå’ŒEndIdxï¼Œå®ƒä»¬çš„2ä¸ªå˜é‡ç›¸äº’æ¯”è¾ƒï¼Œä¸€å…±æœ‰4ç§æ¯”è¾ƒæ–¹å¼ã€‚å¦‚æœ4ç§æ¯”è¾ƒéƒ½æ²¡åŒ¹é…ï¼Œå¦‚æœè®¾ç½®äº†keyï¼Œå°±ä¼šç”¨keyè¿›è¡Œæ¯”è¾ƒï¼Œåœ¨æ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œå˜é‡ä¼šå¾€ä¸­é—´é ï¼Œä¸€æ—¦StartIdx&gt;EndIdxè¡¨æ˜oldChå’ŒvChè‡³å°‘æœ‰ä¸€ä¸ªå·²ç»éå†å®Œäº†ï¼Œå°±ä¼šç»“æŸæ¯”è¾ƒã€‚ å›¾è§£updateChildrenç»ˆäºæ¥åˆ°äº†è¿™ä¸€éƒ¨åˆ†ï¼Œä¸Šé¢çš„æ€»ç»“ç›¸ä¿¡å¾ˆå¤šäººä¹Ÿçœ‹å¾—ä¸€è„¸æ‡µé€¼ï¼Œä¸‹é¢æˆ‘ä»¬å¥½å¥½è¯´é“è¯´é“ã€‚ç°åœ¨åˆ†åˆ«å¯¹oldSã€oldEã€Sã€Eä¸¤ä¸¤åšsameVnodeæ¯”è¾ƒï¼Œæœ‰å››ç§æ¯”è¾ƒæ–¹å¼ï¼Œå½“å…¶ä¸­ä¸¤ä¸ªèƒ½åŒ¹é…ä¸Šé‚£ä¹ˆçœŸå®domä¸­çš„ç›¸åº”èŠ‚ç‚¹ä¼šç§»åˆ°Vnodeç›¸åº”çš„ä½ç½®ï¼Œè¿™å¥è¯æœ‰ç‚¹ç»•ï¼Œæ‰“ä¸ªæ¯”æ–¹ å¦‚æœæ˜¯oldSå’ŒEåŒ¹é…ä¸Šäº†ï¼Œé‚£ä¹ˆçœŸå®domä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¼šç§»åˆ°æœ€å å¦‚æœæ˜¯oldEå’ŒSåŒ¹é…ä¸Šäº†ï¼Œé‚£ä¹ˆçœŸå®domä¸­çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ä¼šç§»åˆ°æœ€å‰ï¼ŒåŒ¹é…ä¸Šçš„ä¸¤ä¸ªæŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨ å¦‚æœå››ç§åŒ¹é…æ²¡æœ‰ä¸€å¯¹æ˜¯æˆåŠŸçš„ï¼Œé‚£ä¹ˆéå†oldChildï¼ŒSæŒ¨ä¸ªå’Œä»–ä»¬åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸå°±åœ¨çœŸå®domä¸­å°†æˆåŠŸçš„èŠ‚ç‚¹ç§»åˆ°æœ€å‰é¢ï¼Œå¦‚æœä¾æ—§æ²¡æœ‰æˆåŠŸçš„ï¼Œé‚£ä¹ˆå°†Så¯¹åº”çš„èŠ‚ç‚¹æ’å…¥åˆ°domä¸­å¯¹åº”çš„oldSä½ç½®ï¼ŒoldSå’ŒSæŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨ã€‚ ç¬¬ä¸€æ­¥ oldS = a, oldE = dï¼› S = a, E = b; oldSå’ŒSåŒ¹é…ï¼Œåˆ™å°†domä¸­çš„aèŠ‚ç‚¹æ”¾åˆ°ç¬¬ä¸€ä¸ªï¼Œå·²ç»æ˜¯ç¬¬ä¸€ä¸ªäº†å°±ä¸ç®¡äº†ï¼Œæ­¤æ—¶domçš„ä½ç½®ä¸ºï¼ša b dç¬¬äºŒæ­¥ oldS = b, oldE = dï¼› S = c, E = b; oldSå’ŒEåŒ¹é…ï¼Œå°±å°†åŸæœ¬çš„bèŠ‚ç‚¹ç§»åŠ¨åˆ°æœ€åï¼Œå› ä¸ºEæ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»–ä»¬ä½ç½®è¦ä¸€è‡´ï¼Œè¿™å°±æ˜¯ä¸Šé¢è¯´çš„ï¼šå½“å…¶ä¸­ä¸¤ä¸ªèƒ½åŒ¹é…ä¸Šé‚£ä¹ˆçœŸå®domä¸­çš„ç›¸åº”èŠ‚ç‚¹ä¼šç§»åˆ°Vnodeç›¸åº”çš„ä½ç½®ï¼Œæ­¤æ—¶domçš„ä½ç½®ä¸ºï¼ša d bç¬¬ä¸‰æ­¥ oldS = d, oldE = dï¼› S = c, E = d; oldEå’ŒEåŒ¹é…ï¼Œä½ç½®ä¸å˜æ­¤æ—¶domçš„ä½ç½®ä¸ºï¼ša d bç¬¬å››æ­¥ oldS++; oldE--; oldS &gt; oldE; éå†ç»“æŸï¼Œè¯´æ˜oldChå…ˆéå†å®Œã€‚å°±å°†å‰©ä½™çš„vChèŠ‚ç‚¹æ ¹æ®è‡ªå·±çš„çš„indexæ’å…¥åˆ°çœŸå®domä¸­å»ï¼Œæ­¤æ—¶domä½ç½®ä¸ºï¼ša c d bä¸€æ¬¡æ¨¡æ‹Ÿå®Œæˆã€‚è¿™ä¸ªåŒ¹é…è¿‡ç¨‹çš„ç»“æŸæœ‰ä¸¤ä¸ªæ¡ä»¶ï¼š oldS &gt; oldEè¡¨ç¤ºoldChå…ˆéå†å®Œï¼Œé‚£ä¹ˆå°±å°†å¤šä½™çš„vChæ ¹æ®indexæ·»åŠ åˆ°domä¸­å»ï¼ˆå¦‚ä¸Šå›¾ï¼‰ S &gt; Eè¡¨ç¤ºvChå…ˆéå†å®Œï¼Œé‚£ä¹ˆå°±åœ¨çœŸå®domä¸­å°†åŒºé—´ä¸º[oldS, oldE]çš„å¤šä½™èŠ‚ç‚¹åˆ æ‰ ä¸‹é¢å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå¯ä»¥åƒä¸Šé¢é‚£æ ·è‡ªå·±è¯•ç€æ¨¡æ‹Ÿä¸€ä¸‹ å½“è¿™äº›èŠ‚ç‚¹sameVnodeæˆåŠŸåå°±ä¼šç´§æ¥ç€æ‰§è¡ŒpatchVnodeäº†ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ä¸Šé¢çš„ä»£ç 123if (sameVnode(oldStartVnode, newStartVnode)) &#123; patchVnode(oldStartVnode, newStartVnode)&#125; å°±è¿™æ ·å±‚å±‚é€’å½’ä¸‹å»ï¼Œç›´åˆ°å°†oldVnodeå’ŒVnodeä¸­çš„æ‰€æœ‰å­èŠ‚ç‚¹æ¯”å¯¹å®Œã€‚ä¹Ÿå°†domçš„æ‰€æœ‰è¡¥ä¸éƒ½æ‰“å¥½å•¦ã€‚é‚£ä¹ˆç°åœ¨å†å›è¿‡å»çœ‹updateChildrençš„ä»£ç ä¼šä¸ä¼šå®¹æ˜“å¾ˆå¤šå‘¢ï¼Ÿ]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>vueçš„diffç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Vue.js å†…éƒ¨è¿è¡Œæœºåˆ¶]]></title>
    <url>%2F2019%2F01%2F30%2Fvue-source-code%2F</url>
    <content type="text"><![CDATA[ç”Ÿæ´»çš„å…¨éƒ¨æ„ä¹‰åœ¨äºæ— ç©·åœ°æ¢ç´¢å°šæœªçŸ¥é“çš„ä¸œè¥¿ï¼Œåœ¨äºä¸æ–­åœ°å¢åŠ æ›´å¤šçš„çŸ¥è¯†ã€‚â€”â€”â€”â€”å·¦æ‹‰ åŸæ–‡åœ°å€ å…¨å±€æ¦‚è§ˆè¿™ä¸€èŠ‚ç¬”è€…å°†ä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸‹ Vue.js å†…éƒ¨çš„æ•´ä¸ªæµç¨‹ï¼Œå¸Œæœ›èƒ½è®©å¤§å®¶å¯¹å…¨å±€æœ‰ä¸€ä¸ªæ•´ä½“çš„å°è±¡ï¼Œç„¶åæˆ‘ä»¬å†æ¥é€ä¸ªæ¨¡å—è¿›è¡Œè®²è§£ã€‚ä»æ¥æ²¡æœ‰äº†è§£è¿‡ Vue.js å®ç°çš„åŒå­¦å¯èƒ½ä¼šå¯¹ä¸€äº›å†…å®¹æ„Ÿåˆ°ç–‘æƒ‘ï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„ï¼Œè¿™ä¸€èŠ‚çš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†è®©å¤§å®¶å¯¹æ•´ä¸ªæµç¨‹æœ‰ä¸€ä¸ªå¤§æ¦‚çš„è®¤è¯†ï¼Œç®—æ˜¯ä¸€ä¸ªæ¦‚è§ˆé¢„å¤‡çš„è¿‡ç¨‹ï¼Œå½“æŠŠæ•´æœ¬å°å†Œè®¤çœŸè¯»å®Œä»¥åï¼Œå†æ¥é˜…è¯»è¿™ä¸€èŠ‚ï¼Œç›¸ä¿¡ä¼šæœ‰æ”¶è·çš„ã€‚ é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç¬”è€…ç”»çš„å†…éƒ¨æµç¨‹å›¾ã€‚å¤§å®¶ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªå›¾ä¸€å®šæ˜¯ä¸€å¤´é›¾æ°´çš„ï¼Œæ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬æ¥é€ä¸ªè®²ä¸€ä¸‹è¿™äº›æ¨¡å—çš„ä½œç”¨ä»¥åŠè°ƒç”¨å…³ç³»ã€‚ç›¸ä¿¡è®²å®Œä¹‹åå¤§å®¶å¯¹Vue.jså†…éƒ¨è¿è¡Œæœºåˆ¶ä¼šæœ‰ä¸€ä¸ªå¤§æ¦‚çš„è®¤è¯†ã€‚ åˆå§‹åŒ–åŠæŒ‚è½½åœ¨ new Vue() ä¹‹åã€‚ Vue ä¼šè°ƒç”¨ _init å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„ init è¿‡ç¨‹ï¼Œå®ƒä¼šåˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸã€äº‹ä»¶ã€ propsã€ methodsã€ dataã€ computed ä¸ watch ç­‰ã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯é€šè¿‡ Object.defineProperty è®¾ç½® setter ä¸ getter å‡½æ•°ï¼Œç”¨æ¥å®ç°ã€Œå“åº”å¼ã€ä»¥åŠã€Œä¾èµ–æ”¶é›†ã€ï¼Œåé¢ä¼šè¯¦ç»†è®²åˆ°ï¼Œè¿™é‡Œåªè¦æœ‰ä¸€ä¸ªå°è±¡å³å¯ã€‚ åˆå§‹åŒ–ä¹‹åè°ƒç”¨ $mount ä¼šæŒ‚è½½ç»„ä»¶ï¼Œå¦‚æœæ˜¯è¿è¡Œæ—¶ç¼–è¯‘ï¼Œå³ä¸å­˜åœ¨ render function ä½†æ˜¯å­˜åœ¨ template çš„æƒ…å†µï¼Œéœ€è¦è¿›è¡Œã€Œç¼–è¯‘ã€æ­¥éª¤ã€‚ ç¼–è¯‘compileç¼–è¯‘å¯ä»¥åˆ†æˆ parseã€optimize ä¸ generate ä¸‰ä¸ªé˜¶æ®µï¼Œæœ€ç»ˆéœ€è¦å¾—åˆ° render functionã€‚ parseparse ä¼šç”¨æ­£åˆ™ç­‰æ–¹å¼è§£æ template æ¨¡æ¿ä¸­çš„æŒ‡ä»¤ã€classã€styleç­‰æ•°æ®ï¼Œå½¢æˆASTã€‚ optimizeoptimize çš„ä¸»è¦ä½œç”¨æ˜¯æ ‡è®° static é™æ€èŠ‚ç‚¹ï¼Œè¿™æ˜¯ Vue åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­çš„ä¸€å¤„ä¼˜åŒ–ï¼Œåé¢å½“ update æ›´æ–°ç•Œé¢æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ª patch çš„è¿‡ç¨‹ï¼Œ diff ç®—æ³•ä¼šç›´æ¥è·³è¿‡é™æ€èŠ‚ç‚¹ï¼Œä»è€Œå‡å°‘äº†æ¯”è¾ƒçš„è¿‡ç¨‹ï¼Œä¼˜åŒ–äº† patch çš„æ€§èƒ½ã€‚ generategenerate æ˜¯å°† AST è½¬åŒ–æˆ render function å­—ç¬¦ä¸²çš„è¿‡ç¨‹ï¼Œå¾—åˆ°ç»“æœæ˜¯ render çš„å­—ç¬¦ä¸²ä»¥åŠ staticRenderFns å­—ç¬¦ä¸²ã€‚ åœ¨ç»å†è¿‡ parseã€optimize ä¸ generate è¿™ä¸‰ä¸ªé˜¶æ®µä»¥åï¼Œç»„ä»¶ä¸­å°±ä¼šå­˜åœ¨æ¸²æŸ“ VNode æ‰€éœ€çš„ render function äº†ã€‚ å“åº”å¼æ¥ä¸‹æ¥ä¹Ÿå°±æ˜¯ Vue.js å“åº”å¼æ ¸å¿ƒéƒ¨åˆ†ã€‚ è¿™é‡Œçš„ getter è·Ÿ setter å·²ç»åœ¨ä¹‹å‰ä»‹ç»è¿‡äº†ï¼Œåœ¨ init çš„æ—¶å€™é€šè¿‡ Object.defineProperty è¿›è¡Œäº†ç»‘å®šï¼Œå®ƒä½¿å¾—å½“è¢«è®¾ç½®çš„å¯¹è±¡è¢«è¯»å–çš„æ—¶å€™ä¼šæ‰§è¡Œ getter å‡½æ•°ï¼Œè€Œåœ¨å½“è¢«èµ‹å€¼çš„æ—¶å€™ä¼šæ‰§è¡Œ setter å‡½æ•°ã€‚ å½“ render function è¢«æ¸²æŸ“çš„æ—¶å€™ï¼Œå› ä¸ºä¼šè¯»å–æ‰€éœ€å¯¹è±¡çš„å€¼ï¼Œæ‰€ä»¥ä¼šè§¦å‘ getter å‡½æ•°è¿›è¡Œã€Œä¾èµ–æ”¶é›†ã€ï¼Œã€Œä¾èµ–æ”¶é›†ã€çš„ç›®çš„æ˜¯å°†è§‚å¯Ÿè€… Watcher å¯¹è±¡å­˜æ”¾åˆ°å½“å‰é—­åŒ…ä¸­çš„è®¢é˜…è€… Dep çš„ subs ä¸­ã€‚å½¢æˆå¦‚ä¸‹æ‰€ç¤ºçš„è¿™æ ·ä¸€ä¸ªå…³ç³»ã€‚ åœ¨ä¿®æ”¹å¯¹è±¡çš„å€¼çš„æ—¶å€™ï¼Œä¼šè§¦å‘å¯¹åº”çš„ setterï¼Œ setter é€šçŸ¥ä¹‹å‰ã€Œä¾èµ–æ”¶é›†ã€å¾—åˆ°çš„ Dep ä¸­çš„æ¯ä¸€ä¸ª Watcherï¼Œå‘Šè¯‰å®ƒä»¬è‡ªå·±çš„å€¼æ”¹å˜äº†ï¼Œéœ€è¦é‡æ–°æ¸²æŸ“è§†å›¾ã€‚è¿™æ—¶å€™è¿™äº› Watcher å°±ä¼šå¼€å§‹è°ƒç”¨ update æ¥æ›´æ–°è§†å›¾ï¼Œå½“ç„¶è¿™ä¸­é—´è¿˜æœ‰ä¸€ä¸ª patch çš„è¿‡ç¨‹ä»¥åŠä½¿ç”¨é˜Ÿåˆ—æ¥å¼‚æ­¥æ›´æ–°çš„ç­–ç•¥ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢å†è®²ã€‚ Virtual DOMæˆ‘ä»¬çŸ¥é“ï¼Œrender function ä¼šè¢«è½¬åŒ–æˆ VNode èŠ‚ç‚¹ã€‚Virtual DOM å…¶å®å°±æ˜¯ä¸€æ£µä»¥ JavaScript å¯¹è±¡ï¼ˆ VNode èŠ‚ç‚¹ï¼‰ä½œä¸ºåŸºç¡€çš„æ ‘ï¼Œç”¨å¯¹è±¡å±æ€§æ¥æè¿°èŠ‚ç‚¹ï¼Œå®é™…ä¸Šå®ƒåªæ˜¯ä¸€å±‚å¯¹çœŸå® DOM çš„æŠ½è±¡ã€‚æœ€ç»ˆå¯ä»¥é€šè¿‡ä¸€ç³»åˆ—æ“ä½œä½¿è¿™æ£µæ ‘æ˜ å°„åˆ°çœŸå®ç¯å¢ƒä¸Šã€‚ç”±äº Virtual DOM æ˜¯ä»¥ JavaScript å¯¹è±¡ä¸ºåŸºç¡€è€Œä¸ä¾èµ–çœŸå®å¹³å°ç¯å¢ƒï¼Œæ‰€ä»¥ä½¿å®ƒå…·æœ‰äº†è·¨å¹³å°çš„èƒ½åŠ›ï¼Œæ¯”å¦‚è¯´æµè§ˆå™¨å¹³å°ã€Weexã€Node ç­‰ã€‚ æ¯”å¦‚è¯´ä¸‹é¢è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼š { tag: &apos;div&apos;, /*è¯´æ˜è¿™æ˜¯ä¸€ä¸ªdivæ ‡ç­¾*/ children: [ /*å­˜æ”¾è¯¥æ ‡ç­¾çš„å­èŠ‚ç‚¹*/ { tag: &apos;a&apos;, /*è¯´æ˜è¿™æ˜¯ä¸€ä¸ªaæ ‡ç­¾*/ text: &apos;click me&apos; /*æ ‡ç­¾çš„å†…å®¹*/ } ] } æ¸²æŸ“åå¯ä»¥å¾—åˆ° &lt;div&gt; &lt;a&gt;click me&lt;/a&gt; &lt;/div&gt; è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå®é™…ä¸Šçš„èŠ‚ç‚¹æœ‰æ›´å¤šçš„å±æ€§æ¥æ ‡å¿—èŠ‚ç‚¹ï¼Œæ¯”å¦‚ isStatic ï¼ˆä»£è¡¨æ˜¯å¦ä¸ºé™æ€èŠ‚ç‚¹ï¼‰ã€ isComment ï¼ˆä»£è¡¨æ˜¯å¦ä¸ºæ³¨é‡ŠèŠ‚ç‚¹ï¼‰ç­‰ã€‚ æ›´æ–°è§†å›¾å‰é¢æˆ‘ä»¬è¯´åˆ°ï¼Œåœ¨ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡å€¼çš„æ—¶å€™ï¼Œä¼šé€šè¿‡ setter -&gt; Watcher -&gt; update çš„æµç¨‹æ¥ä¿®æ”¹å¯¹åº”çš„è§†å›¾ï¼Œé‚£ä¹ˆæœ€ç»ˆæ˜¯å¦‚ä½•æ›´æ–°è§†å›¾çš„å‘¢ï¼Ÿ å½“æ•°æ®å˜åŒ–åï¼Œæ‰§è¡Œ render function å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–°çš„ VNode èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦å¾—åˆ°æ–°çš„è§†å›¾ï¼Œæœ€ç®€å•ç²—æš´çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è§£æè¿™ä¸ªæ–°çš„ VNode èŠ‚ç‚¹ï¼Œç„¶åç”¨ innerHTML ç›´æ¥å…¨éƒ¨æ¸²æŸ“åˆ°çœŸå® DOM ä¸­ã€‚ä½†æ˜¯å…¶å®æˆ‘ä»¬åªå¯¹å…¶ä¸­çš„ä¸€å°å—å†…å®¹è¿›è¡Œäº†ä¿®æ”¹ï¼Œè¿™æ ·åšä¼¼ä¹æœ‰äº›ã€Œæµªè´¹ã€ã€‚ é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸èƒ½åªä¿®æ”¹é‚£äº›ã€Œæ”¹å˜äº†çš„åœ°æ–¹ã€å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±è¦ä»‹ç»æˆ‘ä»¬çš„ã€Œpatchã€äº†ã€‚æˆ‘ä»¬ä¼šå°†æ–°çš„ VNode ä¸æ—§çš„ VNode ä¸€èµ·ä¼ å…¥ patch è¿›è¡Œæ¯”è¾ƒï¼Œç»è¿‡ diff ç®—æ³•å¾—å‡ºå®ƒä»¬çš„ã€Œå·®å¼‚ã€ã€‚æœ€åæˆ‘ä»¬åªéœ€è¦å°†è¿™äº›ã€Œå·®å¼‚ã€çš„å¯¹åº” DOM è¿›è¡Œä¿®æ”¹å³å¯ã€‚ å†çœ‹å…¨å±€å›è¿‡å¤´å†æ¥çœ‹çœ‹è¿™å¼ å›¾ï¼Œæ˜¯ä¸æ˜¯å¤§è„‘ä¸­å·²ç»æœ‰ä¸€ä¸ªå¤§æ¦‚çš„è„‰ç»œäº†å‘¢ï¼Ÿ]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>Vue.js å†…éƒ¨è¿è¡Œæœºåˆ¶</tag>
        <tag>patch</tag>
        <tag>render function</tag>
        <tag>diff</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gulpå’ŒwebpackåŒºåˆ«]]></title>
    <url>%2F2019%2F01%2F29%2Fgulp%E5%92%8Cwebpack%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"><![CDATA[æˆ‘æ„¿åŒ–èº«çŸ³æ¡¥ï¼Œå—äº”ç™¾å¹´é£å¹ï¼Œäº”ç™¾å¹´æ—¥æ™’ï¼Œäº”ç™¾å¹´é›¨æ·‹ï¼Œåªæ±‚å¥¹ä»æ¡¥ä¸Šç»è¿‡ åŸæ–‡åœ°å€ gulpgulpå¼ºè°ƒçš„æ˜¯å‰ç«¯å¼€å‘çš„å·¥ä½œæµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®ä¸€ç³»åˆ—çš„taskï¼Œå®šä¹‰taskå¤„ç†çš„äº‹åŠ¡ï¼ˆä¾‹å¦‚æ–‡ä»¶å‹ç¼©åˆå¹¶ã€é›ªç¢§å›¾ã€å¯åŠ¨serverã€ç‰ˆæœ¬æ§åˆ¶ç­‰ï¼‰ï¼Œç„¶åå®šä¹‰æ‰§è¡Œé¡ºåºï¼Œæ¥è®©gulpæ‰§è¡Œè¿™äº›taskï¼Œä»è€Œæ„å»ºé¡¹ç›®çš„æ•´ä¸ªå‰ç«¯å¼€å‘æµç¨‹ã€‚ PSï¼šç®€å•è¯´å°±ä¸€ä¸ªTask Runner webpackwebpackæ˜¯ä¸€ä¸ªå‰ç«¯æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œæ›´ä¾§é‡æ¨¡å—æ‰“åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¼€å‘ä¸­çš„æ‰€æœ‰èµ„æºï¼ˆå›¾ç‰‡ã€jsæ–‡ä»¶ã€cssæ–‡ä»¶ç­‰ï¼‰éƒ½çœ‹æˆæ¨¡å—ï¼Œé€šè¿‡loaderï¼ˆåŠ è½½å™¨ï¼‰å’Œpluginsï¼ˆæ’ä»¶ï¼‰å¯¹èµ„æºè¿›è¡Œå¤„ç†ï¼Œæ‰“åŒ…æˆç¬¦åˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„å‰ç«¯èµ„æºã€‚PSï¼šwebpack is a module bundle ç›¸åŒåŠŸèƒ½gulpä¸webpackå¯ä»¥å®ç°ä¸€äº›ç›¸åŒåŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼ˆåˆ—ä¸¾éƒ¨åˆ†ï¼‰ï¼š åŠŸèƒ½ gulp webpack æ–‡ä»¶åˆå¹¶ä¸å‹ç¼©ï¼ˆcssï¼‰ ä½¿ç”¨gulp-minify-cssæ¨¡å— æ ·å¼åˆå¹¶ä¸€èˆ¬ç”¨åˆ°extract-text-webpack-pluginæ’ä»¶å‹ç¼©åˆ™ä½¿ç”¨webpack.optimize.UglifyJsPlugin æ–‡ä»¶åˆå¹¶ä¸å‹ç¼©ï¼ˆjsï¼‰ ä½¿ç”¨gulp-uglifyå’Œgulp-concatä¸¤ä¸ªæ¨¡å— jsåˆå¹¶åœ¨æ¨¡å—åŒ–å¼€å§‹å°±å·²ç»åš,å‹ç¼©åˆ™ä½¿ç”¨webpack.optimize.UglifyJsPlugin sass/lessé¢„ç¼–è¯‘ ä½¿ç”¨gulp-sass/gulp-less æ¨¡å— sass-loader/less-loader è¿›è¡Œé¢„å¤„ç† å¯åŠ¨server ä½¿ç”¨gulp-webserveræ¨¡å— ä½¿ç”¨webpack-dev-serveræ¨¡å— ç‰ˆæœ¬æ§åˆ¶ ä½¿ç”¨gulp-revå’Œgulp-rev-collectorä¸¤ä¸ªæ¨¡å— å°†ç”Ÿæˆæ–‡ä»¶åŠ ä¸Šhashå€¼ module.exports = {plugins:[new ExtractTextPlugin(style.[hash].cssâ€)} ä¸¤è€…åŒºåˆ« è™½ç„¶éƒ½æ˜¯å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œä½†çœ‹ä»–ä»¬çš„å®šä½å°±çŸ¥é“ä¸æ˜¯å¯¹ç­‰çš„ã€‚ gulpä¸¥æ ¼ä¸Šè®²ï¼Œæ¨¡å—åŒ–ä¸æ˜¯ä»–å¼ºè°ƒçš„ä¸œè¥¿ï¼Œä»–æ—¨åœ¨è§„èŒƒå‰ç«¯å¼€å‘æµç¨‹ã€‚ webpackæ›´æ˜¯æ˜æ˜¾å¼ºè°ƒæ¨¡å—åŒ–å¼€å‘ï¼Œè€Œé‚£äº›æ–‡ä»¶å‹ç¼©åˆå¹¶ã€é¢„å¤„ç†ç­‰åŠŸèƒ½ï¼Œä¸è¿‡æ˜¯ä»–é™„å¸¦çš„åŠŸèƒ½ã€‚ æ€»ç»“ gulpåº”è¯¥ä¸gruntæ¯”è¾ƒï¼Œè€Œwebpackåº”è¯¥ä¸browserifyï¼ˆç½‘ä¸Šå¤ªå¤šèµ„æ–™å°±è¿™ä¹ˆè¯´ï¼Œè¿™ä¹ˆè¯´æ˜¯æ²¡æœ‰é”™ï¼Œä¸è¿‡å•å•è¿™æ ·ä¸€å¥è¯å¹¶ä¸èƒ½è®©äººæ¸…æ™°æ˜äº†ï¼‰ã€‚ gulpä¸webpackä¸Šæ˜¯äº’è¡¥çš„ï¼Œè¿˜æ˜¯å¯æ›¿æ¢çš„ï¼Œå–å†³äºä½ é¡¹ç›®çš„éœ€æ±‚ã€‚å¦‚æœåªæ˜¯ä¸ªvueæˆ–reactçš„å•é¡µåº”ç”¨ï¼Œwebpackä¹Ÿå°±å¤Ÿç”¨ï¼›å¦‚æœwebpackæŸäº›åŠŸèƒ½ä½¿ç”¨èµ·æ¥éº»çƒ¦ç”šè‡³æ²¡æœ‰ï¼ˆé›ªç¢§å›¾å°±æ²¡æœ‰ï¼‰ï¼Œé‚£å°±å¯ä»¥ç»“åˆgulpä¸€èµ·ç”¨ã€‚]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>gulpå’ŒwebpackåŒºåˆ«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsæ¨¡å—åŒ–ç¼–ç¨‹å¼„æ‡‚CommonJSå’ŒAMD/CMDï¼]]></title>
    <url>%2F2019%2F01%2F28%2FCommonJs-AMD-CMD%2F</url>
    <content type="text"><![CDATA[ä¸ºä»€ä¹ˆæ¨¡å—å¾ˆé‡è¦ï¼Ÿ å› ä¸ºæœ‰äº†æ¨¡å—ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´æ–¹ä¾¿åœ°ä½¿ç”¨åˆ«äººçš„ä»£ç ï¼Œæƒ³è¦ä»€ä¹ˆåŠŸèƒ½ï¼Œå°±åŠ è½½ä»€ä¹ˆæ¨¡å—ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªå‰æï¼Œé‚£å°±æ˜¯å¤§å®¶å¿…é¡»ä»¥åŒæ ·çš„æ–¹å¼ç¼–å†™æ¨¡å—ï¼Œå¦åˆ™ä½ æœ‰ä½ çš„å†™æ³•ï¼Œæˆ‘æœ‰æˆ‘çš„å†™æ³•ï¼Œå²‚ä¸æ˜¯ä¹±äº†å¥—ï¼ åŸæ–‡é“¾æ¥ CommonJS ä¸€å¼€å§‹å¤§å®¶éƒ½è®¤ä¸ºJSæ˜¯è¾£é¸¡ï¼Œæ²¡ä»€ä¹ˆç”¨ï¼Œå®˜æ–¹å®šä¹‰çš„APIåªèƒ½æ„å»ºåŸºäºæµè§ˆå™¨çš„åº”ç”¨ç¨‹åºï¼Œé€—æˆ‘å‘¢ï¼Œè¿™å¤ªç‹­éš˜äº†å§(ç”¨äº†ä¸ªé«˜ç«¯è¯ï¼Œå˜å˜)ï¼ŒCommonJSå°±æŒ‰è€ä¸ä½äº†ï¼ŒCommonJS APIå®šä¹‰å¾ˆå¤šæ™®é€šåº”ç”¨ç¨‹åºï¼ˆä¸»è¦æŒ‡éæµè§ˆå™¨çš„åº”ç”¨ï¼‰ä½¿ç”¨çš„APIï¼Œä»è€Œå¡«è¡¥äº†è¿™ä¸ªç©ºç™½ã€‚å®ƒçš„ç»ˆæç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªç±»ä¼¼Pythonï¼ŒRubyå’ŒJavaæ ‡å‡†åº“ã€‚è¿™æ ·çš„è¯ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨CommonJS APIç¼–å†™åº”ç”¨ç¨‹åºï¼Œç„¶åè¿™äº›åº”ç”¨å¯ä»¥è¿è¡Œåœ¨ä¸åŒçš„JavaScriptè§£é‡Šå™¨å’Œä¸åŒçš„ä¸»æœºç¯å¢ƒä¸­ã€‚åœ¨å…¼å®¹CommonJSçš„ç³»ç»Ÿä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨JavaScriptå¼€å‘ä»¥ä¸‹ç¨‹åºï¼š (1).æœåŠ¡å™¨ç«¯JavaScriptåº”ç”¨ç¨‹åº(2).å‘½ä»¤è¡Œå·¥å…·(3).å›¾å½¢ç•Œé¢åº”ç”¨ç¨‹åº(4).æ··åˆåº”ç”¨ç¨‹åºï¼ˆå¦‚ï¼ŒTitaniumæˆ–Adobe AIRï¼‰ 2009å¹´ï¼Œç¾å›½ç¨‹åºå‘˜Ryan Dahlåˆ›é€ äº†node.jsé¡¹ç›®ï¼Œå°†javascriptè¯­è¨€ç”¨äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹ã€‚è¿™æ ‡å¿—â€Javascriptæ¨¡å—åŒ–ç¼–ç¨‹â€æ­£å¼è¯ç”Ÿã€‚å› ä¸ºè€å®è¯´ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œæ²¡æœ‰æ¨¡å—ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¤§çš„é—®é¢˜ï¼Œæ¯•ç«Ÿç½‘é¡µç¨‹åºçš„å¤æ‚æ€§æœ‰é™ï¼›ä½†æ˜¯åœ¨æœåŠ¡å™¨ç«¯ï¼Œä¸€å®šè¦æœ‰æ¨¡å—ï¼Œä¸æ“ä½œç³»ç»Ÿå’Œå…¶ä»–åº”ç”¨ç¨‹åºäº’åŠ¨ï¼Œå¦åˆ™æ ¹æœ¬æ²¡æ³•ç¼–ç¨‹ã€‚NodeJSæ˜¯CommonJSè§„èŒƒçš„å®ç°ï¼Œwebpack ä¹Ÿæ˜¯ä»¥CommonJSçš„å½¢å¼æ¥ä¹¦å†™ã€‚ node.jsçš„æ¨¡å—ç³»ç»Ÿï¼Œå°±æ˜¯å‚ç…§CommonJSè§„èŒƒå®ç°çš„ã€‚åœ¨CommonJSä¸­ï¼Œæœ‰ä¸€ä¸ªå…¨å±€æ€§æ–¹æ³•require()ï¼Œç”¨äºåŠ è½½æ¨¡å—ã€‚å‡å®šæœ‰ä¸€ä¸ªæ•°å­¦æ¨¡å—math.jsï¼Œå°±å¯ä»¥åƒä¸‹é¢è¿™æ ·åŠ è½½ã€‚ var math = require(â€˜mathâ€™); ç„¶åï¼Œå°±å¯ä»¥è°ƒç”¨æ¨¡å—æä¾›çš„æ–¹æ³•ï¼š var math = require(â€˜mathâ€™); math.add(2,3); // 5 CommonJSå®šä¹‰çš„æ¨¡å—åˆ†ä¸º:{æ¨¡å—å¼•ç”¨(require)} {æ¨¡å—å®šä¹‰(exports)} {æ¨¡å—æ ‡è¯†(module)} require()ç”¨æ¥å¼•å…¥å¤–éƒ¨æ¨¡å—ï¼›exportså¯¹è±¡ç”¨äºå¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–å˜é‡ï¼Œå”¯ä¸€çš„å¯¼å‡ºå£ï¼›moduleå¯¹è±¡å°±ä»£è¡¨æ¨¡å—æœ¬èº«ã€‚ è™½è¯´Nodeéµå¾ªCommonJSçš„è§„èŒƒï¼Œä½†æ˜¯ç›¸æ¯”ä¹Ÿæ˜¯åšäº†ä¸€äº›å–èˆï¼Œå¡«äº†ä¸€äº›æ–°ä¸œè¥¿çš„ã€‚ ä¸è¿‡ï¼Œè¯´äº†CommonJSä¹Ÿè¯´äº†Nodeï¼Œé‚£ä¹ˆæˆ‘è§‰å¾—ä¹Ÿå¾—å…ˆäº†è§£ä¸‹NPMäº†ã€‚NPMä½œä¸ºNodeçš„åŒ…ç®¡ç†å™¨ï¼Œä¸æ˜¯ä¸ºäº†å¸®åŠ©Nodeè§£å†³ä¾èµ–åŒ…çš„å®‰è£…é—®é¢˜å˜›ï¼Œé‚£å®ƒè‚¯å®šä¹Ÿè¦éµå¾ªCommonJSè§„èŒƒå•¦ï¼Œå®ƒéµå¾ªåŒ…è§„èŒƒï¼ˆè¿˜æ˜¯ç†è®ºï¼‰çš„ã€‚CommonJS WIKIè®²äº†å®ƒçš„å†å²ï¼Œè¿˜ä»‹ç»äº†moduleså’Œpackagesç­‰ã€‚ ä¸‹é¢è®²è®²commonJSçš„åŸç†ä»¥åŠç®€æ˜“å®ç°ï¼š åŸç†æµè§ˆå™¨ä¸æ”¯æŒCommonJSåŸå› ï¼Œåœ¨äºç¼ºå°‘å››ä¸ªNode.jsç¯å¢ƒå˜é‡ module exports require globalåªè¦èƒ½æä¾›è¿™4ä¸ªå˜é‡ï¼Œæµè§ˆå™¨å°±èƒ½åŠ è½½CommonJSæ¨¡å—ä¸‹é¢ä¸€ä¸ªç®€å•ç¤ºä¾‹ var module = { exports : {} }; (function(module,exports){ exports.multiply = function(n){return n*100} }(module,module.exports)) var f = module.exports.multiply; f(5) // 500 ä¸Šé¢ä»£ç å‘ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°æä¾› module å’Œ exports ä¸¤ä¸ªå¤–éƒ¨å˜é‡ï¼Œæ¨¡å—å°±æ”¾åœ¨è¿™ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°é‡Œé¢ã€‚æ¨¡å—çš„è¾“å‡ºå€¼æ”¾åœ¨ module.exports ä¹‹ä¸­ï¼Œè¿™æ ·å°±å®ç°äº†æ¨¡å—çš„åŠ è½½ã€‚ Browserify çš„å®ç°çŸ¥é“äº†åŸç†ï¼Œå°±èƒ½åšå‡ºå·¥å…·äº†ã€‚Browserify æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„ CommonJS æ ¼å¼è½¬æ¢çš„å·¥å…·ã€‚ è¯·çœ‹ä¸€ä¸ªä¾‹å­ï¼Œmain.js æ¨¡å—åŠ è½½ foo.js æ¨¡å—ã€‚ 12345678// foo.jsmodule.exports = function(x) &#123;console.log(x);&#125;;// main.jsvar foo = require(&quot;./foo&quot;);foo(&quot;Hi&quot;); ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œå°±èƒ½å°†main.jsè½¬ä¸ºæµè§ˆå™¨å¯ç”¨çš„æ ¼å¼ã€‚ $ browserify main.js &gt; compiled.jsBrowserifyåˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿå®‰è£…ä¸€ä¸‹browser-unpackï¼Œå°±èƒ½çœ‹æ¸…æ¥šäº†ã€‚$ npm install browser-unpack -gç„¶åï¼Œå°†å‰é¢ç”Ÿæˆçš„compile.jsè§£åŒ…ã€‚ $ browser-unpack &lt; compiled.js 12345678910111213[ &#123; &quot;id&quot;:1, &quot;source&quot;:&quot;module.exports = function(x) &#123;\n console.log(x);\n&#125;;&quot;, &quot;deps&quot;:&#123;&#125; &#125;, &#123; &quot;id&quot;:2, &quot;source&quot;:&quot;var foo = require(\&quot;./foo\&quot;);\nfoo(\&quot;Hi\&quot;);&quot;, &quot;deps&quot;:&#123;&quot;./foo&quot;:1&#125;, &quot;entry&quot;:true &#125;] å¯ä»¥çœ‹åˆ°ï¼Œbrowerify å°†æ‰€æœ‰æ¨¡å—æ”¾å…¥ä¸€ä¸ªæ•°ç»„ï¼Œid å±æ€§æ˜¯æ¨¡å—çš„ç¼–å·ï¼Œsource å±æ€§æ˜¯æ¨¡å—çš„æºç ï¼Œdeps å±æ€§æ˜¯æ¨¡å—çš„ä¾èµ–ã€‚ å› ä¸ºmain.jsåŠ è½½äº†foo.js,æ‰€ä»¥depså±æ€§å°±æŒ‡å®š./fooå¯¹åº”1å·æ¨¡å—ã€‚æ‰§è¡Œæ—¶å€™ï¼Œæµè§ˆå™¨é‡åˆ°require(./foo)è¯­å¥ï¼Œå°±è‡ªåŠ¨æ‰§è¡Œ1å¥½æ¨¡å—çš„sourceå±æ€§ï¼Œå¹¶å°†æ‰§è¡Œåmodule.exportså±æ€§å€¼è¾“å‡º Tiny Browser Requireè™½ç„¶ Browserify å¾ˆå¼ºå¤§ï¼Œä½†ä¸èƒ½åœ¨æµè§ˆå™¨é‡Œæ“ä½œï¼Œæœ‰æ—¶å°±å¾ˆä¸æ–¹ä¾¿ã€‚æˆ‘æ ¹æ® mocha çš„å†…éƒ¨å®ç°ï¼Œåšäº†ä¸€ä¸ªçº¯æµè§ˆå™¨çš„ CommonJS æ¨¡å—åŠ è½½å™¨ tiny-browser-require ã€‚å®Œå…¨ä¸éœ€è¦å‘½ä»¤è¡Œï¼Œç›´æ¥æ”¾è¿›æµè§ˆå™¨å³å¯ï¼Œæ‰€æœ‰ä»£ç åªæœ‰30å¤šè¡Œã€‚ å®ƒçš„é€»è¾‘éå¸¸ç®€å•ï¼Œå°±æ˜¯æŠŠæ¨¡å—è¯»å…¥æ•°ç»„ï¼ŒåŠ è½½è·¯å¾„å°±æ˜¯æ¨¡å—çš„idã€‚123456789101112131415161718192021222324252627282930313233343536373839404142 function require(p)&#123; var path = require.resolve(p); //node.jsè¯­æ³•åŠ è½½å½“å‰æ¨¡å—ç›®å½•ä¸‹çš„ç»å¯¹è·¯å¾„ var mod = require.modules[path]; if (!mod) throw new Error(&apos;failed to require &quot;&apos; + p + &apos;&quot;&apos;); if (!mod.exports) &#123; mod.exports = &#123;&#125;; mod.call(mod.exports, mod, mod.exports, require.relative(path)); &#125; return mod.exports;&#125;require.modules = &#123;&#125;;require.resolve = function (path)&#123; var orig = path; var reg = path + &apos;.js&apos;; var index = path + &apos;/index.js&apos;; return require.modules[reg] &amp;&amp; reg || require.modules[index] &amp;&amp; index || orig;&#125;;require.register = function (path, fn)&#123; require.modules[path] = fn;&#125;;require.relative = function (parent) &#123; return function(p)&#123; if (&apos;.&apos; != p.charAt(0)) return require(p); var path = parent.split(&apos;/&apos;); var segs = p.split(&apos;/&apos;); path.pop(); for (var i = 0; i &lt; segs.length; i++) &#123; var seg = segs[i]; if (&apos;..&apos; == seg) path.pop(); else if (&apos;.&apos; != seg) path.push(seg); &#125; return require(path.join(&apos;/&apos;)); &#125;;&#125;;ä½¿ç”¨çš„æ—¶å€™ï¼Œå…ˆå°†ä¸Šé¢çš„ä»£ç æ”¾å…¥é¡µé¢ã€‚ç„¶åï¼Œå°†æ¨¡å—æ”¾åœ¨å¦‚ä¸‹çš„ç«‹å³æ‰§è¡Œå‡½æ•°é‡Œé¢ï¼Œå°±å¯ä»¥è°ƒç”¨äº†ã€‚ &lt;script src=&quot;require.js&quot; /&gt; &lt;script&gt; require.register(&quot;moduleId&quot;, function(module, exports, require){ // Module code goes here }); var result = require(&quot;moduleId&quot;); &lt;/script&gt; è¿˜æ˜¯ä»¥å‰é¢çš„ main.js åŠ è½½ foo.js ä¸ºä¾‹ã€‚ require.register(&quot;./foo.js&quot;, function(module, exports, require){ module.exports = function(x) { console.log(x); }; }); var foo = require(&quot;./foo.js&quot;); foo(&quot;Hi&quot;); æ³¨æ„ï¼Œè¿™ä¸ªåº“åªæ¨¡æ‹Ÿäº† require ã€module ã€exports ä¸‰ä¸ªå˜é‡ï¼Œå¦‚æœæ¨¡å—è¿˜ç”¨åˆ°äº† global æˆ–è€…å…¶ä»– Node ä¸“æœ‰å˜é‡ï¼ˆæ¯”å¦‚ processï¼‰ï¼Œå°±é€šè¿‡ç«‹å³æ‰§è¡Œå‡½æ•°æä¾›å³å¯ã€‚ AMDåŸºäºcommonJSè§„èŒƒçš„nodeJSå‡ºæ¥ä»¥åï¼ŒæœåŠ¡ç«¯çš„æ¨¡å—æ¦‚å¿µå·²ç»å½¢æˆï¼Œå¾ˆè‡ªç„¶åœ°ï¼Œå¤§å®¶å°±æƒ³è¦å®¢æˆ·ç«¯æ¨¡å—ã€‚è€Œä¸”æœ€å¥½ä¸¤è€…èƒ½å¤Ÿå…¼å®¹ï¼Œä¸€ä¸ªæ¨¡å—ä¸ç”¨ä¿®æ”¹ï¼Œåœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨éƒ½å¯ä»¥è¿è¡Œã€‚ä½†æ˜¯ï¼Œç”±äºä¸€ä¸ªé‡å¤§çš„å±€é™ï¼Œä½¿å¾—CommonJSè§„èŒƒä¸é€‚ç”¨äºæµè§ˆå™¨ç¯å¢ƒã€‚è¿˜æ˜¯ä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœåœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œä¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œä½ èƒ½çœ‹å‡ºæ¥å—ï¼Ÿ var math = require(â€˜mathâ€™);math.add(2, 3); ç¬¬äºŒè¡Œmath.add(2, 3)ï¼Œåœ¨ç¬¬ä¸€è¡Œrequire(â€˜mathâ€™)ä¹‹åè¿è¡Œï¼Œå› æ­¤å¿…é¡»ç­‰math.jsåŠ è½½å®Œæˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåŠ è½½æ—¶é—´å¾ˆé•¿ï¼Œæ•´ä¸ªåº”ç”¨å°±ä¼šåœåœ¨é‚£é‡Œç­‰ã€‚æ‚¨ä¼šæ³¨æ„åˆ° require æ˜¯åŒæ­¥çš„ã€‚ è¿™å¯¹æœåŠ¡å™¨ç«¯ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ‰€æœ‰çš„æ¨¡å—éƒ½å­˜æ”¾åœ¨æœ¬åœ°ç¡¬ç›˜ï¼Œå¯ä»¥åŒæ­¥åŠ è½½å®Œæˆï¼Œç­‰å¾…æ—¶é—´å°±æ˜¯ç¡¬ç›˜çš„è¯»å–æ—¶é—´ã€‚ä½†æ˜¯ï¼Œå¯¹äºæµè§ˆå™¨ï¼Œè¿™å´æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå› ä¸ºæ¨¡å—éƒ½æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼Œç­‰å¾…æ—¶é—´å–å†³äºç½‘é€Ÿçš„å¿«æ…¢ï¼Œå¯èƒ½è¦ç­‰å¾ˆé•¿æ—¶é—´ï¼Œæµè§ˆå™¨å¤„äºâ€å‡æ­»â€çŠ¶æ€ã€‚ å› æ­¤ï¼Œæµè§ˆå™¨ç«¯çš„æ¨¡å—ï¼Œä¸èƒ½é‡‡ç”¨â€åŒæ­¥åŠ è½½â€ï¼ˆsynchronousï¼‰ï¼Œåªèƒ½é‡‡ç”¨â€å¼‚æ­¥åŠ è½½â€ï¼ˆasynchronousï¼‰ã€‚è¿™å°±æ˜¯AMDè§„èŒƒè¯ç”Ÿçš„èƒŒæ™¯ã€‚ CommonJSæ˜¯ä¸»è¦ä¸ºäº†JSåœ¨åç«¯çš„è¡¨ç°åˆ¶å®šçš„ï¼Œä»–æ˜¯ä¸é€‚åˆå‰ç«¯çš„ï¼ŒAMD(å¼‚æ­¥æ¨¡å—å®šä¹‰)å‡ºç°äº†ï¼Œå®ƒå°±ä¸»è¦ä¸ºå‰ç«¯JSçš„è¡¨ç°åˆ¶å®šè§„èŒƒã€‚ AMDæ˜¯â€Asynchronous Module Definitionâ€çš„ç¼©å†™ï¼Œæ„æ€å°±æ˜¯â€å¼‚æ­¥æ¨¡å—å®šä¹‰â€ã€‚å®ƒé‡‡ç”¨å¼‚æ­¥æ–¹å¼åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“å®ƒåé¢è¯­å¥çš„è¿è¡Œã€‚æ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥ï¼Œéƒ½å®šä¹‰åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œç­‰åˆ°åŠ è½½å®Œæˆä¹‹åï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ‰ä¼šè¿è¡Œã€‚ AMDä¹Ÿé‡‡ç”¨require()è¯­å¥åŠ è½½æ¨¡å—ï¼Œä½†æ˜¯ä¸åŒäºCommonJSï¼Œå®ƒè¦æ±‚ä¸¤ä¸ªå‚æ•°ï¼š require([module], callback); ç¬¬ä¸€ä¸ªå‚æ•°[module]ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢çš„æˆå‘˜å°±æ˜¯è¦åŠ è½½çš„æ¨¡å—ï¼›ç¬¬äºŒä¸ªå‚æ•°callbackï¼Œåˆ™æ˜¯åŠ è½½æˆåŠŸä¹‹åçš„å›è°ƒå‡½æ•°ã€‚å¦‚æœå°†å‰é¢çš„ä»£ç æ”¹å†™æˆAMDå½¢å¼ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š123require([&apos;math&apos;], function (math) &#123; math.add(2, 3); &#125;); math.add()ä¸mathæ¨¡å—åŠ è½½ä¸æ˜¯åŒæ­¥çš„ï¼Œæµè§ˆå™¨ä¸ä¼šå‘ç”Ÿå‡æ­»ã€‚æ‰€ä»¥å¾ˆæ˜¾ç„¶ï¼ŒAMDæ¯”è¾ƒé€‚åˆæµè§ˆå™¨ç¯å¢ƒã€‚ç›®å‰ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªJavascriptåº“å®ç°äº†AMDè§„èŒƒï¼šrequire.jså’Œcurl.jsã€‚ RequireJSå°±æ˜¯å®ç°äº†AMDè§„èŒƒçš„å‘¢ã€‚è¯¦ç»†æ¦‚æ‹¬ï¼šä¸‹é¢ä»¥RequireJSä¸ºä¾‹è¯´æ˜AMDè§„èŒƒ ä¸ºä»€ä¹ˆè¦ç”¨require.jsï¼Ÿæœ€æ—©çš„æ—¶å€™ï¼Œæ‰€æœ‰Javascriptä»£ç éƒ½å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œåªè¦åŠ è½½è¿™ä¸€ä¸ªæ–‡ä»¶å°±å¤Ÿäº†ã€‚åæ¥ï¼Œä»£ç è¶Šæ¥è¶Šå¤šï¼Œä¸€ä¸ªæ–‡ä»¶ä¸å¤Ÿäº†ï¼Œå¿…é¡»åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œä¾æ¬¡åŠ è½½ã€‚ä¸‹é¢çš„ç½‘é¡µä»£ç ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½è§è¿‡ã€‚123456&lt;script src=&quot;1.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;2.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;3.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;4.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;5.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;6.js&quot;&gt;&lt;/script&gt;è¿™æ®µä»£ç ä¾æ¬¡åŠ è½½å¤šä¸ªjsæ–‡ä»¶ã€‚è¿™æ ·çš„å†™æ³•æœ‰å¾ˆå¤§çš„ç¼ºç‚¹ã€‚é¦–å…ˆï¼ŒåŠ è½½çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šåœæ­¢ç½‘é¡µæ¸²æŸ“ï¼ŒåŠ è½½æ–‡ä»¶è¶Šå¤šï¼Œç½‘é¡µå¤±å»å“åº”çš„æ—¶é—´å°±ä¼šè¶Šé•¿ï¼›å…¶æ¬¡ï¼Œç”±äºjsæ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå› æ­¤å¿…é¡»ä¸¥æ ¼ä¿è¯åŠ è½½é¡ºåºï¼ˆæ¯”å¦‚ä¸Šä¾‹çš„1.jsè¦åœ¨2.jsçš„å‰é¢ï¼‰ï¼Œä¾èµ–æ€§æœ€å¤§çš„æ¨¡å—ä¸€å®šè¦æ”¾åˆ°æœ€ååŠ è½½ï¼Œå½“ä¾èµ–å…³ç³»å¾ˆå¤æ‚çš„æ—¶å€™ï¼Œä»£ç çš„ç¼–å†™å’Œç»´æŠ¤éƒ½ä¼šå˜å¾—å›°éš¾ã€‚ require.jsçš„è¯ç”Ÿï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼š (1) å®ç°jsæ–‡ä»¶çš„å¼‚æ­¥åŠ è½½ï¼Œé¿å…ç½‘é¡µå¤±å»å“åº”ï¼›(2) ç®¡ç†æ¨¡å—ä¹‹é—´çš„ä¾èµ–æ€§ï¼Œä¾¿äºä»£ç çš„ç¼–å†™å’Œç»´æŠ¤ã€‚ require.jsçš„åŠ è½½ä½¿ç”¨require.jsçš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯å…ˆå»å®˜æ–¹ç½‘ç«™ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ã€‚ä¸‹è½½åï¼Œå‡å®šæŠŠå®ƒæ”¾åœ¨jså­ç›®å½•ä¸‹é¢ï¼Œå°±å¯ä»¥åŠ è½½äº†ã€‚ &lt;script src=&quot;js/require.js&quot;&gt;&lt;/script&gt; æœ‰äººå¯èƒ½ä¼šæƒ³åˆ°ï¼ŒåŠ è½½è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯èƒ½é€ æˆç½‘é¡µå¤±å»å“åº”ã€‚è§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æŠŠå®ƒæ”¾åœ¨ç½‘é¡µåº•éƒ¨åŠ è½½ï¼Œå¦ä¸€ä¸ªæ˜¯å†™æˆä¸‹é¢è¿™æ ·ï¼š &lt;script src=&quot;js/require.js&quot; defer async=&quot;true&quot; &gt;&lt;/script&gt; asyncå±æ€§è¡¨æ˜è¿™ä¸ªæ–‡ä»¶éœ€è¦å¼‚æ­¥åŠ è½½ï¼Œé¿å…ç½‘é¡µå¤±å»å“åº”ã€‚IEä¸æ”¯æŒè¿™ä¸ªå±æ€§ï¼Œåªæ”¯æŒdeferï¼Œæ‰€ä»¥æŠŠdeferä¹Ÿå†™ä¸Šã€‚åŠ è½½require.jsä»¥åï¼Œä¸‹ä¸€æ­¥å°±è¦åŠ è½½æˆ‘ä»¬è‡ªå·±çš„ä»£ç äº†ã€‚å‡å®šæˆ‘ä»¬è‡ªå·±çš„ä»£ç æ–‡ä»¶æ˜¯main.jsï¼Œä¹Ÿæ”¾åœ¨jsç›®å½•ä¸‹é¢ã€‚é‚£ä¹ˆï¼Œåªéœ€è¦å†™æˆä¸‹é¢è¿™æ ·å°±è¡Œäº†ï¼š &lt;script src=&quot;js/require.js&quot; data-main=&quot;js/main&quot;&gt;&lt;/script&gt; data-mainå±æ€§çš„ä½œç”¨æ˜¯ï¼ŒæŒ‡å®šç½‘é¡µç¨‹åºçš„ä¸»æ¨¡å—ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œå°±æ˜¯jsç›®å½•ä¸‹é¢çš„main.jsï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šç¬¬ä¸€ä¸ªè¢«require.jsåŠ è½½ã€‚ç”±äºrequire.jsé»˜è®¤çš„æ–‡ä»¶åç¼€åæ˜¯jsï¼Œæ‰€ä»¥å¯ä»¥æŠŠmain.jsç®€å†™æˆmainã€‚ ä¸»æ¨¡å—çš„å†™æ³•ä¸Šä¸€èŠ‚çš„main.jsï¼Œæˆ‘æŠŠå®ƒç§°ä¸ºâ€ä¸»æ¨¡å—â€ï¼Œæ„æ€æ˜¯æ•´ä¸ªç½‘é¡µçš„å…¥å£ä»£ç ã€‚å®ƒæœ‰ç‚¹åƒCè¯­è¨€çš„main()å‡½æ•°ï¼Œæ‰€æœ‰ä»£ç éƒ½ä»è¿™å„¿å¼€å§‹è¿è¡Œã€‚ä¸‹é¢å°±æ¥çœ‹ï¼Œæ€ä¹ˆå†™main.jsã€‚å¦‚æœæˆ‘ä»¬çš„ä»£ç ä¸ä¾èµ–ä»»ä½•å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å†™å…¥javascriptä»£ç ã€‚ // main.js alert(â€œåŠ è½½æˆåŠŸï¼â€); ä½†è¿™æ ·çš„è¯ï¼Œå°±æ²¡å¿…è¦ä½¿ç”¨require.jsäº†ã€‚çœŸæ­£å¸¸è§çš„æƒ…å†µæ˜¯ï¼Œä¸»æ¨¡å—ä¾èµ–äºå…¶ä»–æ¨¡å—ï¼Œè¿™æ—¶å°±è¦ä½¿ç”¨AMDè§„èŒƒå®šä¹‰çš„çš„require()å‡½æ•°ã€‚ // main.js require([â€˜moduleAâ€™, â€˜moduleBâ€™, â€˜moduleCâ€™], function (moduleA, moduleB, moduleC){ // some code here }); require()å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºæ‰€ä¾èµ–çš„æ¨¡å—ï¼Œä¸Šä¾‹å°±æ˜¯[â€˜moduleAâ€™, â€˜moduleBâ€™, â€˜moduleCâ€™]ï¼Œå³ä¸»æ¨¡å—ä¾èµ–è¿™ä¸‰ä¸ªæ¨¡å—ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“å‰é¢æŒ‡å®šçš„æ¨¡å—éƒ½åŠ è½½æˆåŠŸåï¼Œå®ƒå°†è¢«è°ƒç”¨ã€‚åŠ è½½çš„æ¨¡å—ä¼šä»¥å‚æ•°å½¢å¼ä¼ å…¥è¯¥å‡½æ•°ï¼Œä»è€Œåœ¨å›è°ƒå‡½æ•°å†…éƒ¨å°±å¯ä»¥ä½¿ç”¨è¿™äº›æ¨¡å—ã€‚ require()å¼‚æ­¥åŠ è½½moduleAï¼ŒmoduleBå’ŒmoduleCï¼Œæµè§ˆå™¨ä¸ä¼šå¤±å»å“åº”ï¼›å®ƒæŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œåªæœ‰å‰é¢çš„æ¨¡å—éƒ½åŠ è½½æˆåŠŸåï¼Œæ‰ä¼šè¿è¡Œï¼Œè§£å†³äº†ä¾èµ–æ€§çš„é—®é¢˜ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚å‡å®šä¸»æ¨¡å—ä¾èµ–jqueryã€underscoreå’Œbackboneè¿™ä¸‰ä¸ªæ¨¡å—ï¼Œmain.jså°±å¯ä»¥è¿™æ ·å†™ï¼š require([â€˜jqueryâ€™, â€˜underscoreâ€™, â€˜backboneâ€™], function ($, _, Backbone){ // some code here }); require.jsä¼šå…ˆåŠ è½½jQueryã€underscoreå’Œbackboneï¼Œç„¶åå†è¿è¡Œå›è°ƒå‡½æ•°ã€‚ä¸»æ¨¡å—çš„ä»£ç å°±å†™åœ¨å›è°ƒå‡½æ•°ä¸­ã€‚ æ¨¡å—çš„åŠ è½½ä¸Šä¸€èŠ‚æœ€åçš„ç¤ºä¾‹ä¸­ï¼Œä¸»æ¨¡å—çš„ä¾èµ–æ¨¡å—æ˜¯[â€˜jqueryâ€™, â€˜underscoreâ€™, â€˜backboneâ€™]ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œrequire.jså‡å®šè¿™ä¸‰ä¸ªæ¨¡å—ä¸main.jsåœ¨åŒä¸€ä¸ªç›®å½•ï¼Œæ–‡ä»¶ååˆ†åˆ«ä¸ºjquery.jsï¼Œunderscore.jså’Œbackbone.jsï¼Œç„¶åè‡ªåŠ¨åŠ è½½ã€‚ ä½¿ç”¨require.config()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¨¡å—çš„åŠ è½½è¡Œä¸ºè¿›è¡Œè‡ªå®šä¹‰ã€‚require.config()å°±å†™åœ¨ä¸»æ¨¡å—ï¼ˆmain.jsï¼‰çš„å¤´éƒ¨ã€‚å‚æ•°å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„pathså±æ€§æŒ‡å®šå„ä¸ªæ¨¡å—çš„åŠ è½½è·¯å¾„ã€‚ require.config({ paths: { â€œjqueryâ€: â€œjquery.minâ€, â€œunderscoreâ€: â€œunderscore.minâ€, â€œbackboneâ€: â€œbackbone.minâ€ } }); ä¸Šé¢çš„ä»£ç ç»™å‡ºäº†ä¸‰ä¸ªæ¨¡å—çš„æ–‡ä»¶åï¼Œè·¯å¾„é»˜è®¤ä¸main.jsåœ¨åŒä¸€ä¸ªç›®å½•ï¼ˆjså­ç›®å½•ï¼‰ã€‚å¦‚æœè¿™äº›æ¨¡å—åœ¨å…¶ä»–ç›®å½•ï¼Œæ¯”å¦‚js/libç›®å½•ï¼Œåˆ™æœ‰ä¸¤ç§å†™æ³•ã€‚ä¸€ç§æ˜¯é€ä¸€æŒ‡å®šè·¯å¾„ã€‚ require.config({ paths: { â€œjqueryâ€: â€œlib/jquery.minâ€, â€œunderscoreâ€: â€œlib/underscore.minâ€, â€œbackboneâ€: â€œlib/backbone.minâ€ } }); å¦ä¸€ç§åˆ™æ˜¯ç›´æ¥æ”¹å˜åŸºç›®å½•ï¼ˆbaseUrlï¼‰ã€‚ require.config({ baseUrl: â€œjs/libâ€, paths: { â€œjqueryâ€: â€œjquery.minâ€, â€œunderscoreâ€: â€œunderscore.minâ€, â€œbackboneâ€: â€œbackbone.minâ€ } }); å¦‚æœæŸä¸ªæ¨¡å—åœ¨å¦ä¸€å°ä¸»æœºä¸Šï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šå®ƒçš„ç½‘å€ï¼Œæ¯”å¦‚ï¼š require.config({ paths: { â€œjqueryâ€: â€œhttps://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min&quot; } }); require.jsè¦æ±‚ï¼Œæ¯ä¸ªæ¨¡å—æ˜¯ä¸€ä¸ªå•ç‹¬çš„jsæ–‡ä»¶ã€‚è¿™æ ·çš„è¯ï¼Œå¦‚æœåŠ è½½å¤šä¸ªæ¨¡å—ï¼Œå°±ä¼šå‘å‡ºå¤šæ¬¡HTTPè¯·æ±‚ï¼Œä¼šå½±å“ç½‘é¡µçš„åŠ è½½é€Ÿåº¦ã€‚å› æ­¤ï¼Œrequire.jsæä¾›äº†ä¸€ä¸ªä¼˜åŒ–å·¥å…·ï¼Œå½“æ¨¡å—éƒ¨ç½²å®Œæ¯•ä»¥åï¼Œå¯ä»¥ç”¨è¿™ä¸ªå·¥å…·å°†å¤šä¸ªæ¨¡å—åˆå¹¶åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå‡å°‘HTTPè¯·æ±‚æ•°ã€‚ AMDæ¨¡å—çš„å†™æ³•require.jsåŠ è½½çš„æ¨¡å—ï¼Œé‡‡ç”¨AMDè§„èŒƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¨¡å—å¿…é¡»æŒ‰ç…§AMDçš„è§„å®šæ¥å†™ã€‚ å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æ¨¡å—å¿…é¡»é‡‡ç”¨ç‰¹å®šçš„define()å‡½æ•°æ¥å®šä¹‰ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—ä¸ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å®šä¹‰åœ¨define()å‡½æ•°ä¹‹ä¸­ã€‚ å‡å®šç°åœ¨æœ‰ä¸€ä¸ªmath.jsæ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªmathæ¨¡å—ã€‚é‚£ä¹ˆï¼Œmath.jså°±è¦è¿™æ ·å†™ï¼š // math.js define(function (){ var add = function (x,y){ return x+y; }; return { add: add }; }); åŠ è½½æ–¹æ³•å¦‚ä¸‹ï¼š // main.js require([â€˜mathâ€™], function (math){ alert(math.add(1,1)); }); å¦‚æœè¿™ä¸ªæ¨¡å—è¿˜ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆdefine()å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒæŒ‡æ˜è¯¥æ¨¡å—çš„ä¾èµ–æ€§ã€‚ define([â€˜myLibâ€™], function(myLib){ function foo(){ myLib.doSomething(); } return { foo : foo }; }); å½“require()å‡½æ•°åŠ è½½ä¸Šé¢è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå°±ä¼šå…ˆåŠ è½½myLib.jsæ–‡ä»¶ã€‚ åŠ è½½éè§„èŒƒçš„æ¨¡å—ç†è®ºä¸Šï¼Œrequire.jsåŠ è½½çš„æ¨¡å—ï¼Œå¿…é¡»æ˜¯æŒ‰ç…§AMDè§„èŒƒã€ç”¨define()å‡½æ•°å®šä¹‰çš„æ¨¡å—ã€‚ä½†æ˜¯å®é™…ä¸Šï¼Œè™½ç„¶å·²ç»æœ‰ä¸€éƒ¨åˆ†æµè¡Œçš„å‡½æ•°åº“ï¼ˆæ¯”å¦‚jQueryï¼‰ç¬¦åˆAMDè§„èŒƒï¼Œæ›´å¤šçš„åº“å¹¶ä¸ç¬¦åˆã€‚é‚£ä¹ˆï¼Œrequire.jsæ˜¯å¦èƒ½å¤ŸåŠ è½½éè§„èŒƒçš„æ¨¡å—å‘¢ï¼Ÿ å›ç­”æ˜¯å¯ä»¥çš„ã€‚ è¿™æ ·çš„æ¨¡å—åœ¨ç”¨require()åŠ è½½ä¹‹å‰ï¼Œè¦å…ˆç”¨require.config()æ–¹æ³•ï¼Œå®šä¹‰å®ƒä»¬çš„ä¸€äº›ç‰¹å¾ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œunderscoreå’Œbackboneè¿™ä¸¤ä¸ªåº“ï¼Œéƒ½æ²¡æœ‰é‡‡ç”¨AMDè§„èŒƒç¼–å†™ã€‚å¦‚æœè¦åŠ è½½å®ƒä»¬çš„è¯ï¼Œå¿…é¡»å…ˆå®šä¹‰å®ƒä»¬çš„ç‰¹å¾ã€‚ require.config({ shim: { â€˜underscoreâ€™:{ exports: â€˜_â€™ }, â€˜backboneâ€™: { deps: [â€˜underscoreâ€™, â€˜jqueryâ€™], exports: â€˜Backboneâ€™ } } }); require.config()æ¥å—ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é™¤äº†æœ‰å‰é¢è¯´è¿‡çš„pathså±æ€§ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªshimå±æ€§ï¼Œä¸“é—¨ç”¨æ¥é…ç½®ä¸å…¼å®¹çš„æ¨¡å—ã€‚å…·ä½“æ¥è¯´ï¼Œæ¯ä¸ªæ¨¡å—è¦å®šä¹‰ï¼ˆ1ï¼‰exportså€¼ï¼ˆè¾“å‡ºçš„å˜é‡åï¼‰ï¼Œè¡¨æ˜è¿™ä¸ªæ¨¡å—å¤–éƒ¨è°ƒç”¨æ—¶çš„åç§°ï¼›ï¼ˆ2ï¼‰depsæ•°ç»„ï¼Œè¡¨æ˜è¯¥æ¨¡å—çš„ä¾èµ–æ€§ã€‚ æ¯”å¦‚ï¼ŒjQueryçš„æ’ä»¶å¯ä»¥è¿™æ ·å®šä¹‰ï¼š shim: { â€˜jquery.scrollâ€™: { deps: [â€˜jqueryâ€™], exports: â€˜jQuery.fn.scrollâ€™ } } require.jsæ’ä»¶require.jsè¿˜æä¾›ä¸€ç³»åˆ—æ’ä»¶ï¼Œå®ç°ä¸€äº›ç‰¹å®šçš„åŠŸèƒ½ã€‚ domreadyæ’ä»¶ï¼Œå¯ä»¥è®©å›è°ƒå‡½æ•°åœ¨é¡µé¢DOMç»“æ„åŠ è½½å®Œæˆåå†è¿è¡Œã€‚ require([â€˜domready!â€™], function (doc){ // called once the DOM is ready }); textå’Œimageæ’ä»¶ï¼Œåˆ™æ˜¯å…è®¸require.jsåŠ è½½æ–‡æœ¬å’Œå›¾ç‰‡æ–‡ä»¶ã€‚ define([ â€˜text!review.txtâ€™, â€˜image!cat.jpgâ€™ ], function(review,cat){ console.log(review); document.body.appendChild(cat); } ); ç±»ä¼¼çš„æ’ä»¶è¿˜æœ‰jsonå’Œmdownï¼Œç”¨äºåŠ è½½jsonæ–‡ä»¶å’Œmarkdownæ–‡ä»¶ã€‚ï¼ˆå®Œï¼‰ å¦ä¸€ä¸ªäººçš„æ¦‚æ‹¬(æœ‰ç‚¹ç®€å•)ï¼š AMDå°±åªæœ‰ä¸€ä¸ªæ¥å£ï¼šdefine(id?,dependencies?,factory); å®ƒè¦åœ¨å£°æ˜æ¨¡å—çš„æ—¶å€™åˆ¶å®šæ‰€æœ‰çš„ä¾èµ–(dep)ï¼Œå¹¶ä¸”è¿˜è¦å½“åšå½¢å‚ä¼ åˆ°factoryä¸­ï¼Œåƒè¿™æ ·ï¼š define([â€˜dep1â€™,â€™dep2â€™],function(dep1,dep2){â€¦}); è¦æ˜¯æ²¡ä»€ä¹ˆä¾èµ–ï¼Œå°±å®šä¹‰ç®€å•çš„æ¨¡å—ï¼Œä¸‹é¢è¿™æ ·å°±å¯ä»¥å•¦ï¼š define(function(){ var exports = {}; exports.method = function(){...}; return exports; }); å’¦ï¼Œè¿™é‡Œæœ‰defineï¼ŒæŠŠä¸œè¥¿åŒ…è£…èµ·æ¥å•¦ï¼Œé‚£Nodeå®ç°ä¸­æ€ä¹ˆæ²¡çœ‹åˆ°æœ‰defineå…³é”®å­—å‘¢ï¼Œå®ƒä¹Ÿè¦æŠŠä¸œè¥¿åŒ…è£…èµ·æ¥å‘€ï¼Œå…¶å®å§ï¼Œåªæ˜¯Nodeéšå¼åŒ…è£…äº†è€Œå·²â€¦.. è¿™æœ‰AMDçš„WIKIä¸­æ–‡ç‰ˆï¼Œè®²äº†å¾ˆå¤šè›®è¯¦ç»†çš„ä¸œè¥¿ï¼Œç”¨åˆ°çš„æ—¶å€™å¯ä»¥æŸ¥çœ‹ï¼šAMDçš„WIKIä¸­æ–‡ç‰ˆ CMDå¤§åè¿œæ‰¬çš„ç‰ä¼¯å†™äº†seajsï¼Œå°±æ˜¯éµå¾ªä»–æå‡ºçš„CMDè§„èŒƒï¼Œä¸AMDè›®ç›¸è¿‘çš„ï¼Œä¸è¿‡ç”¨èµ·æ¥æ„Ÿè§‰æ›´åŠ æ–¹ä¾¿äº›ï¼Œæœ€é‡è¦çš„æ˜¯ä¸­æ–‡ç‰ˆï¼Œåº”æœ‰å°½æœ‰ï¼šseajså®˜æ–¹doc define(function(require,exports,module){â€¦}); ç”¨è¿‡seajså§ï¼Œè¿™ä¸ªä¸é™Œç”Ÿå§ï¼Œå¯¹å§ã€‚ å‰é¢è¯´AMDï¼Œè¯´RequireJSå®ç°äº†AMDï¼ŒCMDçœ‹èµ·æ¥ä¸AMDå¥½åƒå‘€ï¼Œé‚£RequireJSä¸SeaJSåƒä¸åƒå‘¢ï¼Ÿ è™½ç„¶CMDä¸AMDè›®åƒçš„ï¼Œä½†åŒºåˆ«è¿˜æ˜¯æŒºæ˜æ˜¾çš„ï¼Œå®˜æ–¹éå®˜æ–¹éƒ½æœ‰é˜è¿°å’Œç†è§£ï¼Œæˆ‘è§‰å¾—å§ï¼Œè¯´çš„éƒ½æŒºå¥½ï¼š å®˜æ–¹é˜è¿°SeaJSä¸RequireJSå¼‚åŒ SeaJSä¸RequireJSçš„æœ€å¤§å¼‚åŒï¼ˆè¿™ä¸ªè¯´çš„ä¹ŸæŒºå¥½)]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>CommonJS/AMD/CMD</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨ JavaScript å’Œ Emoji åšåœ°å€æ åŠ¨ç”»]]></title>
    <url>%2F2019%2F01%2F27%2FEmojis-url%2F</url>
    <content type="text"><![CDATA[åŒæ ·æ˜¯9å¹´ä¹‰åŠ¡æ•™è‚²ï¼Œä½ ä¸ºä½•è¿™ä¹ˆä¼˜ç§€ è¯‘è€…ï¼šWpeach åŸæ–‡ä½œè€…ï¼šMatthew Rayfield åŸæ–‡åœ°å€ï¼šAnimating URLs with Javascript and Emojis ä½ å¯ä»¥åœ¨åœ°å€æ ä½¿ç”¨ emojiï¼ˆå’Œå…¶å®ƒå›¾å½¢ unicode å­—ç¬¦ï¼‰ï¼Œè¿™çœ‹ç€å¾ˆæ£’ï¼Œä½†æ˜¯å¥½åƒæ²¡äººè¿™ä¹ˆåšï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¹Ÿè®¸ emoji å¯¹äºæ­£å¸¸çš„ç½‘ç»œå¹³å°æ¥è¯´å¤ªè¿‡å¼‚å›½æƒ…è°ƒäº†ï¼Ÿæˆ–è®¸æ˜¯ä»–ä»¬å› ä¸ºå®³æ€•ä¸åˆ©äºSEOï¼Ÿä¸ç®¡ä»€ä¹ˆåŸå› ï¼Œç»´æ©å›¾ä¸­çš„åˆç†æ€§è§‚ç‚¹â€œæ²¡äººè¿™ä¹ˆåšï¼Œä½†è¿™æ˜¯å¯èƒ½çš„â€æ˜¯è®©æˆ‘å…´å¥‹çš„ç‚¹ã€‚æ‰€ä»¥æˆ‘å†³å®šèŠ±è´¹ä¸€äº›æ—¶é—´ç ”ç©¶åœ¨åœ°å€æ ä¸­å›¾å½¢å­—ç¬¦çš„å¯èƒ½æ€§ï¼Œç‰¹åˆ«æ˜¯é€šè¿‡ JavaScript ç»™è¿™äº›å­—ç¬¦åŠ ä¸ŠåŠ¨ç”»ã€‚å¾ªç¯åŠ¨ç”»é¦–å…ˆï¼Œç¡®ä¿ä½ é¡µé¢çš„ JavaScript ä»£ç æ˜¯ UTF-8 ç¼–ç ï¼Œå¦åˆ™æ— æ³•åœ¨ä½ çš„ä»£ç ä¸­æ˜¾ç¤º emojiï¼Œè¿™å¯ä»¥é€šè¿‡è®¾ç½® HTTP å¤´éƒ¨æˆ–é¡µé¢çš„ META æ ‡ç­¾æ¥å®ç°ã€‚ä½ å¾ˆå¯èƒ½ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªï¼Œä½†ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ›´å¤šä¿¡æ¯ï¼šUnicode in Javascript by Flavioã€‚ä¸ºäº†è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œè®© emoji åƒå°ä»™å¥³ä¸€æ ·åœ¨åœ°å€æ é‡Œååèµ·èˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¾ªç¯ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬æ‰€éœ€è¦çš„åªæ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œæˆ‘ä»¬å¯åŠ¨è¿™ä¸ªå¾ªç¯ï¼Œå®ƒä¸æ–­å¾ªç¯ï¼Œæˆ‘ä»¬çš„ç›®çš„å°±è¾¾åˆ°äº†ã€‚è¿™æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå¾ªç¯åŠ¨ç”»ï¼Œä¸€ä¸ªæ—‹è½¬çš„emoji æœˆäº®ã€‚æˆ‘çŒœå½“ä»–ä»¬æ·»åŠ è¿™ä¸ª emoji åºåˆ—æ—¶ï¼Œä¹Ÿæœ‰è¿™ä¸ªæƒ³æ³•å§ï¼Ÿ var f = [&apos;ğŸŒ‘&apos;, &apos;ğŸŒ’&apos;, &apos;ğŸŒ“&apos;, &apos;ğŸŒ”&apos;, &apos;ğŸŒ&apos;, &apos;ğŸŒ–&apos;, &apos;ğŸŒ—&apos;, &apos;ğŸŒ˜&apos;]; function loop() { location.hash = f[Math.floor((Date.now()/100)%f.length)]; setTimeout(loop, 50); } loop(); å¤åˆ¶ä»£ç è¿è¡Œä»£ç ï¼Œä½ å¯ä»¥åœ¨åœ°å€æ çœ‹åˆ°æ­¤å¾ªç¯çš„ç»“æœã€‚å¦‚æœä½ ä¸å–œæ¬¢æ—‹è½¬çš„æœˆäº®ï¼Œä½ å¯ä»¥é€‰æ‹©ä»»ä½•ä½ å–œæ¬¢çš„ emoji æ¥æ›¿æ¢è¿™ä¸ªæ•°ç»„ï¼Œæ¯”å¦‚ä¸€ä¸ªæ—¶é’Ÿï¼š var f = [â€˜ğŸ•â€™,â€™ğŸ•‘â€™,â€™ğŸ•’â€™,â€™ğŸ•“â€™,â€™ğŸ•”â€™,â€™ğŸ••â€™,â€™ğŸ•–â€™,â€™ğŸ•—â€™,â€™ğŸ•˜â€™,â€™ğŸ•™â€™,â€™ğŸ•šâ€™,â€™ğŸ•›â€™];å¤åˆ¶ä»£ç è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼ŒçœŸçš„éå¸¸ç®€å•ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥å‡çº§ä¸€ä¸‹å¾ªç¯ï¼Œè®©å®ƒæ˜¾ç¤ºä¸€ä¸² emoji ! è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨ emoji çš„skin tone modifiersè‚¤è‰²è°ƒèŠ‚å±æ€§æ¥åˆ¶ä½œä¸€äº›å˜è‰²å®å®ï¼š var e = [&apos;ğŸ»&apos;, &apos;ğŸ¼&apos;, &apos;ğŸ½&apos;, &apos;ğŸ¾&apos;, &apos;ğŸ¿&apos;]; function loop() { var s = &apos;&apos;, i, m; for (i = 0; i &lt; 10; i ++) { m = Math.floor(e.length * ((Math.sin((Date.now()/100) + i)+1)/2)); s += &apos;ğŸ‘¶&apos; + e[m]; } location.hash = s; setTimeout(loop, 50); } loop(); å¤åˆ¶ä»£ç æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ—¶é—´å’Œä½ç½®æ§åˆ¶çš„æ­£å¼¦æ³¢æ¥é€‰æ‹©æˆ‘ä»¬æƒ³è¦çš„é¢œè‰²ï¼Œè¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¾ˆå¥½çš„é¢œè‰²å˜å¹»æ•ˆæœï¼æ¯”å¦‚æˆ‘ä»¬å†æ¥ä¸€æ¬¡æœˆäº®æ—‹è½¬ï¼Œä½¿å®ƒå±•å¼€ï¼Œåˆ¶ä½œä¸€ä¸ªç±»ä¼¼äºåŠ è½½æ¡çš„åŠ¨ç”»ï¼Ÿå¥½çš„ï¼Œå¼€å§‹å®ç°ï¼š var f = [&apos;ğŸŒ‘&apos;, &apos;ğŸŒ˜&apos;, &apos;ğŸŒ—&apos;, &apos;ğŸŒ–&apos;, &apos;ğŸŒ•&apos;, &apos;ğŸŒ”&apos;, &apos;ğŸŒ“&apos;, &apos;ğŸŒ’&apos;], d = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], m = 0; function loop() { var s = &apos;&apos;, x = 0; if (!m) { while (d[x] == 4) { x ++; } if (x &gt;= d.length) m = 1; else { d[x] ++; } } else { while (d[x] == 0) { x ++; } if (x &gt;= d.length) m = 0; else { d[x] ++; if (d[x] == 8) d[x] = 0; } } d.forEach(function (n) { s += f[n]; }); location.hash = s; setTimeout(loop, 50); } loop(); å¤åˆ¶ä»£ç æ¢ç´¢å…¶å®ƒå­—ç¬¦ä¸æ­¢æ˜¯ emoji ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§åœ¨åœ°å€æ æ˜¾ç¤ºå›¾å½¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬çš„ç›®æ ‡ä¸­ä¹Ÿæœ‰ä¸€äº› unicode å­—ç¬¦ã€‚ç‰¹åˆ«æœ‰è¶£çš„æ˜¯ æ¡†çº¿å­—ç¬¦: å®ƒä»¬ä¸­å¾ˆå¤šæ›´é€‚åˆäºŒç»´è¾“å‡ºï¼Œä½†å®ƒä»¬åœ¨ä¸€ç»´è¾“å‡ºä¹Ÿå¾ˆæ£’ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¤šä¸ªé«˜åº¦å˜åŒ–çš„å—å­—ç¬¦ä¸²ï¼Œå¹¶æ„é€ ä¸€ä¸ªæ¼‚äº®çš„å°æ³¢æµªåŠ¨ç”»ï¼š function loop() { var i, n, s = &apos;&apos;; for (i = 0; i &lt; 10; i++) { n = Math.floor(Math.sin((Date.now()/200) + (i/2)) * 4) + 4; s += String.fromCharCode(0x2581 + n); } window.location.hash = s; setTimeout(loop, 50); } loop(); å¤åˆ¶ä»£ç æˆ‘éå¸¸å–œæ¬¢å®ƒçš„æ•ˆæœï¼Œæˆ‘æŠŠå®ƒæ°¸ä¹…æ”¾åœ¨äº† wavyurl.com ä¸Šã€‚ä½¿ç”¨å¯å˜å®½åº¦å­—ç¬¦ï¼Œæˆ‘ä»¬ç”šè‡³åœ¨æ°´å¹³æ–¹å‘ä¸Šæ‘†åŠ¨ï¼Œåˆ›å»ºç±»ä¼¼äºè¿›åº¦æ¡çš„ä¸œè¥¿ï¼š function loop() { var s = &apos;&apos;, p; p = Math.floor(((Math.sin(Date.now()/300)+1)/2) * 100); while (p &gt;= 8) { s += &apos;â–ˆ&apos;; p -= 8; } s += [&apos;â €&apos;,&apos;â–&apos;,&apos;â–&apos;,&apos;â–&apos;,&apos;â–Œ&apos;,&apos;â–‹&apos;,&apos;â–Š&apos;,&apos;â–‰&apos;][p]; location.hash = s; setTimeout(loop, 50); } å¤åˆ¶ä»£ç è¿›åº¦æ¡ï¼Ÿè¿™çœ‹èµ·æ¥ï¼Œè¿˜æ˜¯æœ‰ç”¨çš„ï¼Œè¿™è®©æˆ‘æƒ³åˆ°äº†â€¦â€¦åœ¨åœ°å€æ æ˜¾ç¤ºè§†é¢‘è¿›åº¦ä¸ºäº†å¢åŠ æˆ‘ä»¬å°å®éªŒçš„å¯èƒ½æ€§ï¼Œæˆ‘æå‡ºäº†åœ¨åœ°å€æ ä¸­æ˜¾ç¤ºç½‘ç»œè§†é¢‘è¿›åº¦çš„æƒ³æ³•ã€‚æˆ‘åªéœ€é™„åŠ ä¸€ä¸ªå‡½æ•°ï¼Œå°†æˆ‘ä»¬çš„è¿›åº¦å­—ç¬¦ä¸²å®šä¹‰åœ¨è§†é¢‘çš„timeupdateäº‹ä»¶ä¸­ï¼Œç§ï¼åœ°å€æ ä¸­çš„è§†é¢‘è¿›åº¦æ¡åŒ…å«æ—¶é—´å’ŒæŒç»­æ—¶é—´ï¼ var video; function formatTime(seconds) { var minutes = Math.floor(seconds/60), seconds = Math.floor(seconds - (minutes*60)); return (&apos;0&apos;+minutes).substr(-2) + &apos;:&apos; + (&apos;0&apos;+seconds).substr(-2); } function renderProgressBar() { var s = &apos;&apos;, l = 15, p = Math.floor(video.currentTime / video.duration * (l-1)), i; for (i = 0; i &lt; l; i ++) { if (i == p) s +=&apos;â—¯&apos;; else if (i &lt; p) s += &apos;â”€&apos;; else s += &apos;â”„&apos;; } location.hash = &apos;â•­&apos;+s+&apos;â•®&apos;+formatTime(video.currentTime)+&apos;â•±&apos;+formatTime(video.duration); } video = document.getElementById(&apos;video&apos;); video.addEventListener(&apos;timeupdate&apos;, renderProgressBar); å¤åˆ¶ä»£ç æˆ‘æ¯”è¾ƒå–œæ¬¢è¿™ä¸ªçº¿æ¡å’Œåœ†ç»„æˆçš„è¿›åº¦æ¡ï¼Œå¦‚æœä½ å–œæ¬¢åˆ«çš„ emoji æ¯”å¦‚æœˆäº®ï¼Œæˆ‘ä¹Ÿèƒ½è®©ä½ æ»¡æ„ï¼š var e = [&apos;ğŸŒ‘&apos;, &apos;ğŸŒ˜&apos;, &apos;ğŸŒ—&apos;, &apos;ğŸŒ–&apos;, &apos;ğŸŒ•&apos;], video; function formatTime(seconds) { var minutes = Math.floor(seconds/60), seconds = Math.floor(seconds - (minutes*60)); return (&apos;0&apos;+minutes).substr(-2) + &apos;:&apos; + (&apos;0&apos;+seconds).substr(-2); } function renderProgressBar() { var s = &apos;&apos;, c = 0, l = 10, p = Math.floor(video.currentTime / video.duration * ((l*5)-1)), i; while (p &gt;= 5) { s += e[4]; c ++; p -= 5; } s += e[p]; c ++; while (c &lt; l) { s += e[0]; c ++; } location.hash = s+formatTime(video.currentTime)+&apos;â•±&apos;+formatTime(video.duration); } video = document.getElementById(&apos;video&apos;); video.addEventListener(&apos;timeupdate&apos;, renderProgressBar); å¤åˆ¶ä»£ç å¥½çš„ï¼Œå°†æ­¤è¿›åº¦æ¡ç§°ä¸ºâ€œæœ‰ç”¨â€çš„å»¶ä¼¸ã€‚ åªç„ä¸€çœ¼ï¼Œæˆ‘ä¹Ÿå¯ä»¥çœ‹åˆ°åœ¨è§†é¢‘åˆ†äº« URL ä¸­çš„è¿›åº¦ã€‚ ä¸YouTubeä¸€æ ·ï¼Œä½ å¯ä»¥é€‰æ‹©åœ¨ç‰¹å®šæ—¶é—´åˆ›å»ºæŒ‡å‘è§†é¢‘çš„é“¾æ¥ï¼Œæ·»åŠ è§†è§‰æŒ‡ç¤ºæ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿå—¯ï¼Ÿä¹Ÿè®¸æˆ‘è¿˜æ²¡æœ‰æå‡ºä¸€äº›æ›´æœ‰ç”¨çš„â€œæŠ€æœ¯â€å®ç°ï¼Œæˆ‘ä¼šç»§ç»­æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚ å˜¿ï¼Œä¹Ÿè®¸ä½ å¯ä»¥å°è¯•ä¸€äº›ä¸œè¥¿ï¼Ÿæœ€åä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä½¿ç”¨location.hash =ï¼Œè€Œä¸æ˜¯æ–°ä¸”é…·çš„HTML5 History APIã€‚ æœ‰ä¸¤ä¸ªåŸå› ï¼šç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ History APIæœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼šå®ƒå®é™…ä¸Šæ›´æ”¹äº†æ•´ä¸ª URL è·¯å¾„ï¼Œè€Œä¸ä»…ä»…æ˜¯ hashã€‚ å› æ­¤ï¼Œå¦‚æœæˆ‘ä½¿ç”¨ History API å¹¶å°†é¡µé¢æ›´æ”¹ä¸º/ğŸŒ‘ğŸŒ˜ğŸŒ—ğŸŒ–ğŸŒ•ï¼Œå®ƒçœ‹èµ·æ¥ä¼šæ¯”æ·»åŠ  ï¼ƒ æ›´å¥½ã€‚ ä½†è¿™ä¹Ÿæ„å‘³ç€æˆ‘çš„ Web æœåŠ¡å™¨å¿…é¡»èƒ½å¤Ÿå“åº”/ğŸŒ‘ğŸŒ˜ğŸŒ—ğŸŒ–ğŸŒ•ï¼Œå¦åˆ™å¦‚æœç”¨æˆ·åˆ·æ–°æˆ–ä»¥å…¶ä»–æ–¹å¼å¯¼èˆªåˆ°ä¿®æ”¹åçš„ URL å°†ä¼šå¤±è´¥ã€‚ è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†æ¯”ä½¿ç”¨location.hash =æ›´å¤æ‚ï¼Œéœ€è¦æˆ‘ä¿®æ”¹æœåŠ¡å™¨é…ç½®ã€‚ç¬¬äºŒä¸ªé—®é¢˜æœ‰äº›å‡ºä¹æ„æ–™ã€‚ å®é™…ä¸Šï¼Œåœ¨æˆ‘æµ‹è¯•çš„3ä¸ªæµè§ˆå™¨ä¸­ï¼Œæœ‰2ä¸ªå†å²APIè¢«é™åˆ¶çš„ã€‚ å¦‚æœæˆ‘ä»¥æå¿«çš„é€Ÿåº¦å°†æˆ‘çš„æ³¢å½¢ç½‘å€æ¨é€åˆ°åœ°å€æ ï¼Œæˆ‘æœ€ç»ˆä¼šåœ¨ Chrome ä¸­æ”¶åˆ°ä»¥ä¸‹é”™è¯¯ï¼š Throttling history state changes to prevent the browser from hanging. Safari ç»™æˆ‘ä»¬æä¾›äº†æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼š SecurityError: Attempt to use history.pushState() more than 100 times per 30.000000 seconds ç°åœ¨ï¼Œå¦‚æœè®©æˆ‘ä¿æŒåœ¨è¿™ä¸ªé™åˆ¶ä¸‹ä¹Ÿè¡Œï¼Œä½†æ˜¯æ¯ç§’3å¸§åªæ˜¯ä¸ä¼šå½±å“æˆ‘ç›®å‰çš„åŠ¨ç”»æ•ˆæœã€‚å¥½å­©å­ Firefox ä¼¼ä¹å¹¶ä¸åœ¨ä¹æˆ‘æ¨é€æ–°å†å²çš„æ¬¡æ•°å’Œé€Ÿåº¦ï¼Œè¿™çœŸæ˜¯æƒ³å¾—å¤ªå‘¨åˆ°äº†ã€‚ä½†æ˜¯ï¼Œä¸¤ä¸ªä¸»è¦çš„æµè§ˆå™¨å—åˆ°å½±å“ï¼ŒåŠ ä¸Šéœ€è¦webæœåŠ¡å™¨é…ç½®æ¥ä¿®å¤ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä½¿æˆ‘æ›´æ„¿æ„å¿å— URL ä¸­çš„ #ã€‚]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>ç”¨JavaScriptå’ŒEmoji åšåœ°å€æ åŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpack4.29.0åŸºæœ¬ç”¨æ³•]]></title>
    <url>%2F2019%2F01%2F25%2Fwebpack4-29-0%2F</url>
    <content type="text"><![CDATA[ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼Œä¸ç§¯å°æµæ— ä»¥æˆæ±Ÿæµ· å‡†å¤‡å·¥ä½œ å…¨å±€å®‰è£…webpackå’Œwebpack-cli sudo npm install webpack -gsudo npm install webpack-cli -g æ–‡ä»¶å¤¹ä¸‹å±€éƒ¨å®‰è£… npm init -ysudo npm install webpack â€“save-devsudo npm install webpack-cli â€“save-dev å®ç°å¯¹ä¸€ä¸ªjsæ–‡ä»¶æ‰“åŒ…1234567891011//webpack.config.jsconst path = require(&apos;path&apos;)module.exports = &#123; mode:&apos;development&apos;, entry:&apos;./app.js&apos;, output:&#123; filename:&apos;[name].bundle.js&apos;, path:path.join(__dirname,&apos;./dist&apos;), &#125;&#125;è¿™æ ·å°±èƒ½åœ¨distç›®å½•ä¸‹å‡ºç°ä¸€ä¸ªapp.bundle.jsæ–‡ä»¶å•¦ï¼ å®ç°å¤šä¸ªjsæ–‡ä»¶æ‰“åŒ…12345678910111213141516171819//webpack.config.jsconst path = require(&apos;path&apos;)const CleanWebpackPlugin = require(&apos;clean-webpack-plugin&apos;)module.exports = &#123; mode: &apos;development&apos;, entry: &#123; index: &apos;./src/index.js&apos;, test: &apos;./src/test.js&apos;, test1: &apos;./src/test1.js&apos;, &#125;, output: &#123; path: path.join(__dirname,&apos;./dist/js&apos;), filename:&apos;[name]-[hash].js&apos;, pubicPath: &apos;http://cdn.con&apos; //è¯·æ±‚æ—¶ä¼šè‡ªå·±åŠ åè®®ï¼ˆlocation.protocol=&apos;http&apos;ï¼‰å’Œç«¯å£å·(host=&apos;cdn.con&apos;) &#125;ï¼Œ plugins: [ new CleanWebpackPlugin ([&apos;./dist/js&apos;]) //æ¸…é™¤ä¹‹å‰æ‰“åŒ…çš„æ–‡ä»¶ ]&#125; ä½¿ç”¨æ¨¡ç‰ˆå®ç°æ¯ä¸ªjså¯¹åº”è‡ªå·±çš„html123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657//webpack.config.jsconst path = require(&apos;path&apos;)const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;) //æ¨¡ç‰ˆloaderconst CleanWebpackPlugin = require(&apos;clean-webpack-plugin&apos;)module.exports = &#123; entry:&#123; index:&apos;./src/index.js&apos;, test:&apos;./src/test.js&apos;, test1:&apos;./src/test1.js&apos;, &#125;, output:&#123; path:path.join(__dirname,&apos;./dist/js&apos;), filename:&apos;[name]-[hash].js&apos;, publicPath:&quot;http://cdn.com&quot; &#125;, plugins:[ new HtmlWebpackPlugin(&#123; title: &apos;this a index.html&apos;, //æ¯ä¸ªhtml çš„title template:&apos;hello.html&apos;, filename:&apos;index.html&apos;, excludeChunks:[&apos;test&apos;,&apos;test1&apos;] //æ’é™¤åä¸ºtest.js,test1.jsæ‰“åŒ…çš„jsæ–‡ä»¶ &#125;), new HtmlWebpackPlugin(&#123; title:&apos;this a test.js&apos;, template:&apos;hello.html&apos;, filename:&apos;test.html&apos;, excludeChunks:[&apos;index&apos;,&apos;test1&apos;] &#125;), new HtmlWebpackPlugin(&#123; title:&apos;this a test1.js&apos;, template:&apos;hello.html&apos;, filename:&apos;test1.html&apos;, excludeChunks:[&apos;test&apos;,&apos;index&apos;] &#125;), new CleanWebpackPlugin([&apos;./dist/js&apos;]) ]&#125;//hello.html æ¨¡ç‰ˆå†…å®¹&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title%&gt;&lt;/title&gt;&lt;script type=&quot;text/javascript&quot;&gt; &lt;%= compilation.assets[htmlWebpackPlugin.files.chunks.test1.entry.substr (htmlWebpackPlugin.files.publicPath.length)].source() %&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;% for(let k in htmlWebpackPlugin.files.chunks) &#123;%&gt; &lt;% if(k != &apos;index&apos;) &#123;%&gt; &lt;script src=&quot;&lt;%=htmlWebpackPlugin.files.chunks[k].entry %&gt;&quot;&gt;&lt;/script&gt; &lt;% &#125;%&gt; &lt;% &#125; %&gt;&lt;/body&gt; ä½¿ç”¨file-loader|css-loader|style-loader|postcss-loader1234567891011121314151617181920212223242526272829303132333435//webpack.config.jsmodule.exports = &#123;mode: &apos;development&apos;,entry: &apos;./app.js&apos;,output: &#123; filename: &apos;[name].bundle.js&apos;, path: path.join(__dirname, &apos;./dist/js1&apos;),&#125;,plugins: [ new CleanWebpackPlugin([&apos;./dist/js1&apos;]), require(&apos;autoprefixer&apos;)],module: &#123; rules: [ &#123; test: /\.(le|c)ss$/, test: /\.(png|jpg|gif)$/, use: [ &#123; loader: &quot;style-loader&quot; &#125;, &#123; loader: &quot;css-loader&quot; &#125;, &#123; loader: &apos;file-loader&apos;&#125;, &#123; loader: &quot;postcss-loader&quot;, options: &#123; plugins: [ require(&quot;autoprefixer&quot;) /*åœ¨è¿™é‡Œæ·»åŠ */, ], &#125; &#125; ] &#125; ] &#125;,&#125;]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>webpack4+</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨githubå’Œhexoæ­å»ºä¸ªäººåšå®¢]]></title>
    <url>%2F2019%2F01%2F24%2Fposts%2F</url>
    <content type="text"><![CDATA[æ‰€è°“åšå®¢ï¼Œéƒ½æ˜¯å­¤èŠ³è‡ªèµ ç°åœ¨è¶Šæ¥è¶Šå¤šçš„äººå–œæ¬¢åˆ©ç”¨Githubæ­å»ºé™æ€ç½‘ç«™ï¼ŒåŸå› ä¸å¤–ä¹ç®€å•çœé’±ã€‚æœ¬äººä¹Ÿåˆ©ç”¨hexo+githubæ­å»ºäº†æœ¬åšå®¢ï¼Œç”¨äºåˆ†äº«ä¸€äº›å¿ƒå¾—ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒæŠ˜è…¾åšå®¢çš„å„ç§é…ç½®ä»¥åŠåŠŸèƒ½å å…·äº†æˆ‘ä¸€éƒ¨åˆ†æ—¶é—´ï¼Œåœ¨æ­¤è¯¦ç»†è®°å½•ä¸‹æˆ‘æ˜¯å¦‚ä½•åˆ©ç”¨hexo+githubæ­å»ºé™æ€åšå®¢ä»¥åŠä¸€äº›é…ç½®ç›¸å…³é—®é¢˜ï¼Œä»¥å…è¿‡åé—å¿˜ï¼Œä¸”å½“å¤‡ä»½ä¹‹ç”¨ã€‚ å‡†å¤‡å·¥ä½œ ä¸‹è½½node.jså¹¶å®‰è£…ï¼ˆå®˜ç½‘ä¸‹è½½å®‰è£…ï¼‰ï¼Œé»˜è®¤ä¼šå®‰è£…npmã€‚ ä¸‹è½½å®‰è£…gitï¼ˆå®˜ç½‘ä¸‹è½½å®‰è£…ï¼‰ ä¸‹è½½å®‰è£…hexoã€‚æ–¹æ³•ï¼šæ‰“å¼€cmd è¿è¡Œnpm install -g hexo æœ¬åœ°æ­å»ºhexoé™æ€åšå®¢ æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚MyBlog è¿›å…¥è¯¥æ–‡ä»¶å¤¹å†…ï¼Œå³å‡»è¿è¡Œgitï¼Œè¾“å…¥ï¼šhexo initï¼ˆç”Ÿæˆhexoæ¨¡æ¿ï¼Œå¯èƒ½è¦ç¿»å¢™ï¼‰ ç”Ÿæˆå®Œæ¨¡æ¿ï¼Œè¿è¡Œnpm installï¼ˆç›®å‰è²Œä¼¼ä¸ç”¨è¿è¡Œè¿™ä¸€æ­¥ï¼‰ æœ€åè¿è¡Œï¼šhexo server ï¼ˆè¿è¡Œç¨‹åºï¼Œè®¿é—®æœ¬åœ°+localhost:4000å¯ä»¥çœ‹åˆ°åšå®¢å·²ç»æ­å»ºæˆåŠŸï¼‰ ç«™å†…æœç´¢é…ç½®é¦–å…ˆå®‰è£…hexo-generator-searchdbæ’ä»¶ npm install hexo-generator-searchdb â€“save ç¼–è¾‘åšå®¢æ ¹ç›®å½•ä¸‹çš„åšå®¢æœ¬åœ°ç›®å½•/_config.ymlç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ–°å¢ä»¥ä¸‹å†…å®¹åˆ°ä»»æ„ä½ç½®ï¼Œsearché¡¶æ ¼æ”¾å¦åˆ™å¯èƒ½æ²¡æ•ˆæœï¼š search: path: search.xml field: post format: html limit: 10000 ç¼–è¾‘åšå®¢æœ¬åœ°ç›®å½•/themes/next/_config.yml ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œå¯ç”¨æœ¬åœ°æœç´¢åŠŸèƒ½,å°†local_search:ä¸‹é¢çš„enable:çš„å€¼ï¼Œæ”¹æˆtrueå¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå…ˆæ¸…ç†ç¼“å­˜ï¼Œç„¶åæœ¬åœ°éƒ¨ç½²è°ƒè¯• hexo cleanhexo s æœç´¢æ— æ•ˆã€ä¸€ç›´loadingçš„é—®é¢˜æŒ‰F12å¯ä»¥æŸ¥çœ‹è¯·æ±‚å‘½ä»¤çš„çŠ¶æ€ï¼ŒçŠ¶æ€ç 200è¡¨ç¤ºè¯·æ±‚æˆåŠŸã€‚ä½†æ˜¯æœç´¢åŠ¨ç”»è¿˜æ˜¯ä¸€ç›´åœ¨è½¬ã€‚1.æ–‡ç« ä¸­åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œæ–‡ä»¶ç¼–ç æ—¶å‡ºé”™ éƒ¨ç½²githubMyBlogæ–‡ä»¶å¤¹å®‰è£… npm install â€“save hexo-deployer-git æ‰¾åˆ° _config.ymlæ–‡ä»¶ä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶deploy:type: gitrepo: https://github.com/Zhanghuaxiao/Zhanghuaxiao.github.io.gitbranch: master æœ€åè¿è¡Œhexo clean(æ¸…é™¤) hexo g(ç”Ÿæˆ) hexo d(éƒ¨ç½²)ç‚¹å‡»æŸ¥çœ‹æ•ˆæœ: https://zhanghuaxiao.github.io/ ä½¿ç”¨nexTä¸»é¢˜ å®‰è£… git clone ä¿®æ”¹_config.ymlæ–‡ä»¶ä¸­ theme:next è¿è¡Œ hexo clean hexo s hexoå’ŒnexTä¸­æ–‡ç½‘ hexoä¸­æ–‡ç½‘ nexTä¸­æ–‡å®˜ç½‘ nexTä¸»é¢˜å‚è€ƒæ–‡ç«  å¯¹nexTä¸»é¢˜è®¾ç½® seoä¼˜åŒ– Hexoåšå®¢Nextä¸»é¢˜ç«™å†…æœç´¢æ¨¡å—ç›¸å…³ï¼Œè§£å†³æœç´¢æ— æ•ˆã€ä¸€ç›´loadingçš„é—®é¢˜]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>nexT</tag>
        <tag>æ­å»ºè‡ªå·±åšå®¢</tag>
        <tag>è§£å†³nextä¸»é¢˜æœç´¢loaddingé—®é¢˜</tag>
      </tags>
  </entry>
</search>
